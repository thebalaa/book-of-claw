# Commit Reference: 00351â€“00400

A plain factual summary of every commit in the OpenClaw repository, from commit 351 through commit 400.

---

## 00351 â€” Verbose: include tool arg metadata in prefixes
**SHA:** 527bed2b53 Â· **Date:** 2025-12-03 09:57
**Files changed:** CHANGELOG.md, README.md, docs/thinking.md, src/agents/agents.test.ts, src/agents/pi.ts, src/agents/types.ts, src/auto-reply/command-reply.ts, src/index.core.test.ts
**Tags:** `verbosity`, `auto-reply`, `core-feature`

Extends tool result messages to include metadata (paths, commands) in the prefix. The tool result prefix now includes available details like file paths from read operations or bash commands. Test cases verify that metadata is correctly extracted and forwarded in the format `[ğŸ› ï¸ tool-name arg]`.

## 00352 â€” Verbose: batch rapid tool results
**SHA:** 38a03ff2c8 Â· **Date:** 2025-12-03 10:11
**Files changed:** CHANGELOG.md, src/auto-reply/command-reply.ts, src/index.core.test.ts
**Tags:** `verbosity`, `auto-reply`, `core-feature`

Implements tool result coalescing to reduce message spam on WhatsApp. Successive tool results of the same type within 250ms are batched into a single message formatted as `[ğŸ› ï¸ tool] arg1, arg2`. Includes helper function `formatToolAggregate()` and debounce logic in the command reply handler.

## 00353 â€” Verbose: shorten home paths in tool meta
**SHA:** deac5ff585 Â· **Date:** 2025-12-03 10:12
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`, `ux`

Abbreviates home directory paths in tool metadata to improve readability. Home paths like `/home/user/file` are displayed as `~/file` to reduce visual clutter in tool result messages.

## 00354 â€” Verbose: slow tool batch window to 1s
**SHA:** b6b5144ddf Â· **Date:** 2025-12-03 10:13
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`, `core-feature`

Adjusts the tool result debounce window from 250ms to 1 second to allow more tool results to accumulate before sending batched messages. Gives the agent more time to execute multiple related operations before reporting results.

## 00355 â€” Docs: note 1s tool coalescing window
**SHA:** 341ecf3bbe Â· **Date:** 2025-12-03 10:19
**Files changed:** CHANGELOG.md
**Tags:** `documentation`

Updates changelog to document the 1-second tool coalescing behavior, noting that successive tool results within ~1s are batched into a single message.

## 00356 â€” Verbose: collapse tool meta paths by directory
**SHA:** c9b5df8184 Â· **Date:** 2025-12-03 10:24
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`, `refactor`

Refactors tool metadata formatting to better aggregate paths that share the same directory or parent location. Improves readability when multiple files from the same directory are processed in sequence.

## 00357 â€” Verbose: shorten meta paths when aggregating
**SHA:** b460fd61bd Â· **Date:** 2025-12-03 10:26
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`, `refactor`

Further optimizes path display in aggregated tool metadata by applying home directory shortening when batching multiple meta items together.

## 00358 â€” Refactor: extract tool meta formatter + debouncer
**SHA:** 597e7e6f13 Â· **Date:** 2025-12-03 10:30
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `refactor`

Extracts tool metadata formatting and debouncing logic into reusable helper functions (`formatToolPrefix()`, `formatToolAggregate()`, `flushPendingTool()`). Improves code organization and maintainability of the verbose output feature.

## 00359 â€” Chore: satisfy lint after tool-meta refactor
**SHA:** e34d0d69aa Â· **Date:** 2025-12-03 10:42
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `linting`

Resolves linting errors introduced during the tool-meta refactoring, including unused variables and import ordering issues.

## 00360 â€” Web: simplify logout message
**SHA:** 62c54cd47c Â· **Date:** 2025-12-03 11:04
**Files changed:** src/web/web.ts
**Tags:** `ux`

Simplifies the logout confirmation message displayed to web users, making the experience cleaner and less verbose.

## 00361 â€” Tau RPC: wait for agent_end when tools run
**SHA:** 8220b11770 Â· **Date:** 2025-12-03 11:29
**Files changed:** src/agents/tau-rpc.ts, src/index.core.test.ts
**Tags:** `process-lifecycle`, `core-feature`

Ensures Tau RPC waits for the `agent_end` event before resolving, even when tool calls are executed. This guarantees the RPC completes after the agent finishes processing all tool results.

## 00362 â€” Pi: resume Tau sessions with --continue
**SHA:** cc596ef011 Â· **Date:** 2025-12-03 11:33
**Files changed:** src/agents/pi.ts
**Tags:** `process-lifecycle`, `core-feature`

Adds `--continue` flag support to Pi agent for resuming Tau RPC sessions without cold starts. Allows warm session reuse for improved performance on subsequent runs.

## 00363 â€” Tau RPC: resolve on agent_end or exit
**SHA:** 3958450223 Â· **Date:** 2025-12-03 11:34
**Files changed:** src/agents/tau-rpc.ts
**Tags:** `process-lifecycle`, `core-feature`

Refines Tau RPC resolution logic to handle both successful completion (`agent_end` event) and process exit conditions. Ensures RPC promises resolve correctly in all exit scenarios.

## 00364 â€” Pi: stream assistant text during RPC runs
**SHA:** 9253702966 Â· **Date:** 2025-12-03 11:50
**Files changed:** src/agents/pi.ts, src/auto-reply/command-reply.ts
**Tags:** `process-lifecycle`, `core-feature`

Enables streaming of assistant messages during RPC execution. Allows assistant responses to be forwarded to users in real-time as they are generated, rather than waiting for the full response.

## 00365 â€” Pi: stream tool results faster (0.5s, flush after 5)
**SHA:** 8f99b13305 Â· **Date:** 2025-12-03 12:08
**Files changed:** src/auto-reply/command-reply.ts, src/index.core.test.ts
**Tags:** `process-lifecycle`, `core-feature`

Optimizes tool result streaming timing: reduces debounce from 1s to 0.5s and adds a flush-after-5 strategy to ensure results are sent promptly even if fewer than 5 results accumulate.

## 00366 â€” Add /restart WhatsApp command to restart warelay
**SHA:** 0824873ffb Â· **Date:** 2025-12-03 12:14
**Files changed:** src/auto-reply/command-reply.ts, src/index.core.test.ts
**Tags:** `core-feature`, `ux`

Introduces `/restart` WhatsApp command to allow users to restart the warelay (now CLAWDIS) service without external intervention. Provides process restart functionality through the chat interface.

## 00367 â€” Docs: document /restart WhatsApp command
**SHA:** 273f2b61d0 Â· **Date:** 2025-12-03 12:16
**Files changed:** README.md, docs/thinking.md
**Tags:** `documentation`

Documents the new `/restart` command in README and thinking.md, explaining its purpose and usage to end users.

## 00368 â€” feat(web): add group chat mention support
**SHA:** 6afe6f4ecb Â· **Date:** 2025-12-03 12:35
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `core-feature`, `ux`

Implements group chat mention support for web clients. Allows users to mention the bot in group conversations, enabling selective triggers based on who initiates the interaction.

## 00369 â€” fix(web): detect self number mentions in group chats
**SHA:** 7ea43b0145 Â· **Date:** 2025-12-03 12:43
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `bugfix`

Fixes mention detection logic to properly recognize when the bot's own phone number is mentioned in group chats, ensuring accurate activation in group contexts.

## 00370 â€” logging: route console output into pino
**SHA:** 4c3635a7c0 Â· **Date:** 2025-12-03 13:07
**Files changed:** src/config.ts, src/index.ts, src/logging.ts, src/index.core.test.ts
**Tags:** `documentation`, `refactor`

Integrates console output with pino logging system to ensure all output (console.log, console.error) is captured and formatted consistently through the logging pipeline.

## 00371 â€” fix(web): allow group replies past allowFrom
**SHA:** 8204351d67 Â· **Date:** 2025-12-03 13:08
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `bugfix`, `ux`

Fixes permission check for group messages to allow replies even when the sender is outside the `allowFrom` list, improving group chat usability.

## 00372 â€” changelog: note logging capture and verbose trace
**SHA:** 47d0b6fc14 Â· **Date:** 2025-12-03 13:09
**Files changed:** CHANGELOG.md
**Tags:** `documentation`

Documents the console logging integration and verbose tracing feature in the changelog.

## 00373 â€” fix(web): let group pings bypass allowFrom
**SHA:** 3a782b6ace Â· **Date:** 2025-12-03 13:11
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `bugfix`

Allows group message pings (@mentions) to bypass the `allowFrom` permission check, enabling responsive behavior in group settings regardless of sender restrictions.

## 00374 â€” test(web): ensure group messages carry sender + bypass allowFrom
**SHA:** 7be9352a3a Â· **Date:** 2025-12-03 13:12
**Files changed:** src/index.core.test.ts
**Tags:** `testing`

Adds comprehensive test coverage for group message handling, verifying that sender information is preserved and that pings correctly bypass permission restrictions.

## 00375 â€” fix(web): unwrap ephemeral/view-once and keep mentions
**SHA:** f68714ec8e Â· **Date:** 2025-12-03 13:15
**Files changed:** src/web/web.ts
**Tags:** `bugfix`

Fixes handling of ephemeral/view-once messages to properly unwrap content while preserving any mentions present in the original message.

## 00376 â€” fix(web): annotate group replies with sender
**SHA:** edc894f6c7 Â· **Date:** 2025-12-03 13:25
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `bugfix`, `ux`

Annotates group chat replies with sender information to provide context about who each message is from, improving clarity in group conversations.

## 00377 â€” Create CNAME
**SHA:** 3354a683735 Â· **Date:** 2025-12-03 16:44
**Files changed:** CNAME
**Tags:** `documentation`

Creates CNAME file for domain routing, setting up DNS configuration for web access.

## 00378 â€” auto-reply: surface tool args from rpc start events
**SHA:** 3a8d6b80e0 Â· **Date:** 2025-12-03 13:31
**Files changed:** src/auto-reply/command-reply.ts, src/agents/tau-rpc.ts
**Tags:** `auto-reply`, `core-feature`

Surfaces tool argument metadata from RPC start events to provide visibility into which tools are being invoked and with what parameters during agent execution.

## 00379 â€” feat(web): prime group sessions with member roster
**SHA:** b55ac994ea Â· **Date:** 2025-12-03 13:33
**Files changed:** src/web/web.ts, src/index.core.test.ts
**Tags:** `core-feature`, `ux`

Initializes group chat sessions with member roster information, providing context about who is in the group before processing messages.

## 00380 â€” auto-reply: emoji + result preview for verbose tool calls
**SHA:** cb5f1fa99d Â· **Date:** 2025-12-03 13:34
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`, `ux`

Adds emoji indicators and result previews to verbose tool call messages, making tool execution more visually scannable and informative.

## 00381 â€” auto-reply: single emoji per verbose tool line
**SHA:** e878780808 Â· **Date:** 2025-12-03 13:35
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `verbosity`, `auto-reply`

Standardizes verbose tool output to use a single emoji per tool line (ğŸ› ï¸) for consistent visual presentation.

## 00382 â€” changelog: note verbose tool emoji/previews
**SHA:** 92a0763a74 Â· **Date:** 2025-12-03 13:36
**Files changed:** CHANGELOG.md
**Tags:** `documentation`

Documents the verbose tool emoji and preview feature in the changelog.

## 00383 â€” fix(web): surface media fetch failures
**SHA:** a321bf1a90 Â· **Date:** 2025-12-03 13:47
**Files changed:** src/web/web.ts
**Tags:** `bugfix`

Improves error handling for media downloads by surfacing fetch failures to users instead of silently ignoring them.

## 00384 â€” fix(web): capture mentions from media captions
**SHA:** 07f323222b Â· **Date:** 2025-12-03 14:13
**Files changed:** src/web/web.ts
**Tags:** `bugfix`

Fixes mention detection to recognize mentions in media message captions, not just in the main message body.

## 00385 â€” docs: note media-only mention fix
**SHA:** 84f8d8733e Â· **Date:** 2025-12-03 14:18
**Files changed:** CHANGELOG.md
**Tags:** `documentation`

Documents the fix for mention detection in media captions.

## 00386 â€” chore: bump version to 1.4.0
**SHA:** 89d49cd925 Â· **Date:** 2025-12-03 14:23
**Files changed:** package.json
**Tags:** `dependency`

Updates version to 1.4.0, reflecting the significant feature additions in verbose output and group chat handling.

## 00387 â€” fix: allow directive-only toggles inside group batches
**SHA:** 088bdb3313 Â· **Date:** 2025-12-03 14:32
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `bugfix`

Fixes handling of directive-only messages (like `/think:high` or `/verbose on`) within group batches, allowing users to toggle settings in group conversations.

## 00388 â€” test: cover verbose directive in group batches
**SHA:** 7bc56d7cfe Â· **Date:** 2025-12-03 14:45
**Files changed:** src/index.core.test.ts
**Tags:** `testing`

Adds test coverage for verbose and thinking directives used within group batches, ensuring proper behavior in group settings.

## 00389 â€” Rebrand to CLAWDIS - add docs, update README
**SHA:** a27ee2366e Â· **Date:** 2025-12-03 15:45
**Files changed:** README.md, docs/index.md, docs/configuration.md, docs/agents.md, docs/security.md, docs/troubleshooting.md, docs/lore.md
**Tags:** `documentation`, `core-feature`

Major rebranding from warelay to CLAWDIS with comprehensive documentation overhaul. Includes new landing page, configuration guide, agent integration documentation, security lessons, troubleshooting guide, and project origin story.

## 00390 â€” Add backlinks to clawd.me, soul.md, steipete.me
**SHA:** 80979cf4d0 Â· **Date:** 2025-12-03 15:46
**Files changed:** docs/index.md
**Tags:** `documentation`

Adds backlinks in documentation to related projects and author pages (clawd.me, soul.md, steipete.me).

## 00391 â€” auto-reply: handle group think/verbose directives
**SHA:** a155ec0599 Â· **Date:** 2025-12-04 02:29
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `auto-reply`, `core-feature`

Extends auto-reply handling to properly process thinking and verbose directives in group chat contexts.

## 00392 â€” config: support clawdis.json path for rebranding
**SHA:** 518af0ef24 Â· **Date:** 2025-12-04 14:52
**Files changed:** src/config.ts, src/types.ts, src/index.core.test.ts
**Tags:** `core-feature`, `refactor`

Updates configuration system to prefer `~/.clawdis/clawdis.json` while maintaining backward compatibility with `~/.warelay/warelay.json`. Configuration loader checks new path first, falls back to legacy path.

## 00393 â€” fix: resolve lint errors (unused vars, imports, formatting)
**SHA:** 4a35bcec21 Â· **Date:** 2025-12-05 00:36
**Files changed:** src/agents/pi.ts, src/config.ts
**Tags:** `linting`, `bugfix`

Resolves linting issues: removes unused variables (prefixed with underscore), cleans up imports, and fixes code formatting across the codebase.

## 00394 â€” CLI: add agent command for direct agent runs
**SHA:** 05b76281f7 Â· **Date:** 2025-12-04 17:53
**Files changed:** src/cli.ts, src/index.core.test.ts
**Tags:** `core-feature`, `ux`

Adds `agent` command to CLI enabling direct agent invocation without message routing, useful for testing and batch operations.

## 00395 â€” auto-reply: honor /new after timestamp prefixes
**SHA:** 34eb75f634 Â· **Date:** 2025-12-04 17:53
**Files changed:** src/auto-reply/command-reply.ts
**Tags:** `auto-reply`, `bugfix`

Fixes auto-reply to correctly process `/new` directives even when they appear after timestamp prefixes, ensuring session reset requests work reliably.

## 00396 â€” web: fix mentioned JID extraction typing
**SHA:** 04ce98148d Â· **Date:** 2025-12-04 17:54
**Files changed:** src/web/web.ts
**Tags:** `bugfix`, `type-safety`

Fixes TypeScript type handling in mentioned JID extraction, ensuring proper null handling and type safety for mention detection.

## 00397 â€” docs: document agent CLI and changelog
**SHA:** 9797a9993a Â· **Date:** 2025-12-04 17:55
**Files changed:** README.md, CHANGELOG.md
**Tags:** `documentation`

Documents the new agent CLI command and updates changelog with recent additions.

## 00398 â€” branding: default to clawdis paths and launchd label
**SHA:** 916a41ed60 Â· **Date:** 2025-12-04 18:01
**Files changed:** src/config.ts, src/launchers/macos.ts
**Tags:** `core-feature`, `refactor`

Updates system integration to use CLAWDIS paths and labels by default. macOS launchd plist now references clawdis instead of warelay.

## 00399 â€” chore: organize imports after rebrand
**SHA:** 20cb709ae3 Â· **Date:** 2025-12-04 18:02
**Files changed:** src/**/*.ts
**Tags:** `linting`

Cleans up and reorganizes imports across all TypeScript files after the rebranding effort, ensuring consistent import ordering.

## 00400 â€” Switch to clawdis RPC mode and complete rebrand
**SHA:** b3e50cbb33 Â· **Date:** 2025-12-05 17:22
**Files changed:** src/agents/pi.ts, src/agents/tau-rpc.ts, src/auto-reply/command-reply.ts, src/config.ts
**Tags:** `core-feature`, `refactor`

Completes the CLAWDIS rebranding by switching RPC infrastructure to use clawdis mode, updating all references from warelay to clawdis throughout the agent and config systems.
