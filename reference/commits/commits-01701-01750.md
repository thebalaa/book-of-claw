# Commit Reference: 01701–01750

A plain factual summary of every commit in the OpenClaw repository, from commit 1701 through commit 1750.

---

## 01701 — Agent: avoid silent failures on oversized images
**SHA:** d66d5cc17e · **Date:** 2025-12-18 22:58
**Files changed:** src/agents/pi-embedded.ts, src/agents/pi-tools.test.ts, src/agents/pi-tools.ts
**Tags:** `bugfix`, `core-feature`, `error-handling`

Added image sanitization functions to prevent oversized base64 images from causing silent failures in LLM requests. The sanitizeContentBlocksImages function downscales images exceeding 2000px dimensions while preserving aspect ratio, affecting both user and tool result message content. New test validates that oversized images are properly downscaled to safe dimensions.

---

## 01702 — Agent: document 2000px image downscale
**SHA:** 0c06276b48 · **Date:** 2025-12-18 23:02
**Files changed:** src/agents/pi-embedded.ts, src/agents/pi-tools.ts
**Tags:** `documentation`, `core-feature`

Added detailed inline comments explaining the Anthropic Messages API limitation where images exceeding 2000px on either dimension cause request rejection. Documented that the auto-downscaling keeps sessions resilient to avoid silent WhatsApp non-replies from oversized image payloads.

---

## 01703 — feat(macos): hover HUD for activity
**SHA:** 47510e2912 · **Date:** 2025-12-19 00:03
**Files changed:** apps/macos/Sources/Clawdis/CritterStatusLabel.swift, apps/macos/Sources/Clawdis/HoverHUD.swift
**Tags:** `core-feature`, `ui`, `macos`

Introduced a new hover HUD component for macOS that displays when hovering over the menu bar icon during agent activity. Enhanced CritterStatusLabel badge rendering with improved contrast and symbol sizing, drawing transparent symbols on filled pucks for better menu bar icon visibility.

---

## 01704 — Canvas host: fix action bridge invocation
**SHA:** 256080e2a2 · **Date:** 2025-12-19 00:04
**Files changed:** src/canvas-host/server.ts
**Tags:** `bugfix`, `ui`, `api`

Fixed action bridge invocation in canvas host by properly binding iOS and Android handler objects before calling postMessage. Changed to store handler references separately to ensure correct method binding on Android WebView, which requires calling the method on the interface object itself.

---

## 01705 — CanvasA2UI: refresh bundled renderer
**SHA:** 3146f8bdbc · **Date:** 2025-12-18 23:08
**Files changed:** apps/shared/ClawdisKit/Sources/ClawdisKit/Resources/CanvasA2UI/a2ui.bundle.js
**Tags:** `build`, `dependency`, `ui`

Updated the bundled A2UI renderer bundle with refreshed dependencies, simplifying module path references in bundled code from pnpm-style paths to standard node_modules paths.

---

## 01706 — macOS: auto-fill Anthropic OAuth from clipboard
**SHA:** 3780f3152c · **Date:** 2025-12-18 23:15
**Files changed:** apps/macos/Sources/Clawdis/AnthropicAuthControls.swift
**Tags:** `core-feature`, `ux`, `macos`

Added clipboard monitoring to automatically detect and auto-fill Anthropic OAuth tokens from the clipboard. Introduced toggle controls for auto-detection and auto-connection with a timer-based polling mechanism that watches for clipboard changes at 0.4 second intervals.

---

## 01707 — feat(macos): delay hover HUD
**SHA:** 7831e0040e · **Date:** 2025-12-19 00:25
**Files changed:** apps/macos/Sources/Clawdis/HoverHUD.swift
**Tags:** `core-feature`, `ux`, `macos`

Added a delay mechanism to the hover HUD display to prevent it from appearing for brief hover interactions. The HUD now only shows after a sustained hover period, improving the user experience by reducing visual noise during quick mouse movements.

---

## 01708 — macOS: add screen record + safer camera defaults
**SHA:** 3772a29557 · **Date:** 2025-12-19 00:29
**Files changed:** apps/macos/Sources/Clawdis/PanelViewController.swift, apps/macos/Sources/Clawdis/ScreenRecording.swift
**Tags:** `core-feature`, `ux`, `macos`

Introduced screen recording capability for macOS with safer camera default settings. The changes improve user experience by providing secure-by-default camera handling when recording screen content.

---

## 01709 — Docs: add nodes overview
**SHA:** d6c5ee86c5 · **Date:** 2025-12-19 00:29
**Files changed:** docs/nodes.md
**Tags:** `documentation`

Created comprehensive documentation for the nodes feature, providing an overview of how nodes work and their capabilities within the system.

---

## 01710 — iOS: allow Tailnet/MagicDNS canvas actions
**SHA:** 0e3e4f269d · **Date:** 2025-12-19 00:52
**Files changed:** apps/ios/Sources/Clawdis/Canvas/CanvasViewController.swift
**Tags:** `core-feature`, `ios`, `networking`

Enabled canvas actions to work over Tailnet/MagicDNS connections on iOS, expanding the network connectivity options for remote canvas interactions.

---

## 01711 — iOS: fix camera clip clamp regression test
**SHA:** 8f0b5d2d97 · **Date:** 2025-12-19 00:53
**Files changed:** apps/ios/Tests/ClawdisTests/CameraClipClampTests.swift
**Tags:** `bugfix`, `testing`, `ios`

Fixed a regression in the camera clip clamp test suite on iOS to ensure proper camera dimension constraints are validated correctly.

---

## 01712 — CLI: retry --force until gateway port is free
**SHA:** 0b4e70e38b · **Date:** 2025-12-18 23:56
**Files changed:** src/cli/commands/up.ts
**Tags:** `bugfix`, `cli`, `devops`

Implemented retry logic in the CLI up command to repeatedly attempt binding to the gateway port with --force flag until the port becomes available, improving reliability during startup.

---

## 01713 — feat(pairing): add silent SSH auto-approve
**SHA:** 77a67484ea · **Date:** 2025-12-19 01:04
**Files changed:** src/pairing/ssh-approver.ts, src/pairing/pairing.ts
**Tags:** `core-feature`, `security`, `process-lifecycle`

Added silent SSH auto-approve capability for pairing workflows, allowing automatic approval of SSH connections without user prompts in certain contexts.

---

## 01714 — docs(agents): require consent for worktrees
**SHA:** beb5b1ad58 · **Date:** 2025-12-19 01:18
**Files changed:** docs/agents.md
**Tags:** `documentation`, `security`

Added documentation clarifying that agent access to git worktrees requires explicit user consent, emphasizing security boundaries for workspace access.

---

## 01715 — feat(nodes): add mac node mode + permission UX
**SHA:** 1fbd84da39 · **Date:** 2025-12-19 01:48
**Files changed:** apps/macos/Sources/Clawdis/NodeMode.swift, src/nodes/permissions.ts
**Tags:** `core-feature`, `ux`, `macos`, `process-lifecycle`

Introduced macOS node mode with associated permission UX components. Users can now run nodes on macOS devices with clear permission controls displayed in the interface.

---

## 01716 — feat: add mac node screen recording and ssh tunnel
**SHA:** 95ea67de28 · **Date:** 2025-12-19 02:33
**Files changed:** apps/macos/Sources/Clawdis/NodeScreenRecord.swift, src/nodes/ssh-tunnel.ts
**Tags:** `core-feature`, `macos`, `networking`, `api`

Implemented screen recording and SSH tunnel capabilities for macOS nodes, enabling remote access and monitoring features for node-based workflows.

---

## 01717 — fix(canvas): load A2UI resources across platforms
**SHA:** b8012a2281 · **Date:** 2025-12-19 01:53
**Files changed:** src/canvas/loader.ts, src/canvas/a2ui-loader.ts
**Tags:** `bugfix`, `ui`, `cross-platform`

Fixed A2UI resource loading to work consistently across iOS, macOS, and web platforms by properly handling platform-specific resource paths and fallbacks.

---

## 01718 — feat: add node screen recording across apps
**SHA:** 7f3be083c1 · **Date:** 2025-12-19 02:56
**Files changed:** src/nodes/screen-record.ts, src/nodes/integrations/
**Tags:** `core-feature`, `api`, `cross-platform`

Extended screen recording support to work across multiple applications and platforms in node mode, providing comprehensive visual feedback for remote node operations.

---

## 01719 — feat: route mac control via nodes
**SHA:** 74cdc1cf3e · **Date:** 2025-12-19 03:16
**Files changed:** src/nodes/control-routing.ts, apps/macos/Sources/Clawdis/ControlRouter.swift
**Tags:** `core-feature`, `macos`, `networking`

Implemented routing of macOS device control through node connections, enabling remote control capabilities when working with node-based deployment architectures.

---

## 01720 — refactor: replace canvas.show with canvas.present
**SHA:** beefda7f60 · **Date:** 2025-12-19 03:35
**Files changed:** src/canvas/api.ts, src/agents/canvas-integration.ts
**Tags:** `refactor`, `api`, `core-feature`

Renamed canvas.show method to canvas.present across the codebase, updating the API to use more semantically appropriate naming that better describes the presentation behavior.

---

## 01721 — fix(onboarding): load saved identity defaults
**SHA:** 41108f497b · **Date:** 2025-12-19 02:40
**Files changed:** src/onboarding/identity-loader.ts
**Tags:** `bugfix`, `ux`, `process-lifecycle`

Fixed onboarding flow to properly load and restore previously saved user identity defaults, ensuring smooth re-onboarding experiences and preventing loss of user preferences.

---

## 01722 — feat(agent): load workspace skills
**SHA:** fb3fae43c0 · **Date:** 2025-12-19 03:38
**Files changed:** src/agents/skill-loader.ts, src/agents/skills/
**Tags:** `core-feature`, `api`, `agent`

Added dynamic workspace skill loading capability, allowing agents to discover and load custom skills defined in the workspace configuration.

---

## 01723 — test: add canvas.present IPC coverage
**SHA:** 65d723d53c · **Date:** 2025-12-19 03:53
**Files changed:** tests/canvas/ipc.test.ts
**Tags:** `testing`, `api`

Added test coverage for the canvas.present IPC (Inter-Process Communication) interface to ensure proper message passing and response handling.

---

## 01724 — fix(onboarding): default identity to Clawd
**SHA:** d80d112e09 · **Date:** 2025-12-19 03:12
**Files changed:** src/onboarding/default-identity.ts
**Tags:** `bugfix`, `ux`, `process-lifecycle`

Fixed onboarding to default the user identity to "Clawd" when no previous identity is available, providing a sensible default for first-time users.

---

## 01725 — feat(macos): add menu link to dashboard
**SHA:** 00fc731d64 · **Date:** 2025-12-19 04:28
**Files changed:** apps/macos/Sources/Clawdis/MenuBar.swift
**Tags:** `core-feature`, `ux`, `macos`

Added a menu item in the macOS menu bar that provides quick access to the dashboard, improving navigation and visibility of the dashboard interface.

---

## 01726 — fix(control-ui): serve dashboard at root
**SHA:** c498348a34 · **Date:** 2025-12-19 05:11
**Files changed:** src/control-ui/server.ts
**Tags:** `bugfix`, `ui`, `devops`

Fixed control UI server to serve the dashboard at the root path (/) instead of a sub-path, simplifying URL structure and improving user experience when accessing the interface.

---

## 01727 — fix(control-ui): drop /ui alias
**SHA:** 6b6f2b5414 · **Date:** 2025-12-19 05:13
**Files changed:** src/control-ui/routes.ts
**Tags:** `cleanup`, `ui`, `api`

Removed the /ui path alias from control UI routing, simplifying the API surface now that the dashboard is served at the root path.

---

## 01728 — fix(control-ui): wrap long message lines
**SHA:** 31620fea3a · **Date:** 2025-12-19 09:54
**Files changed:** src/control-ui/components/MessageView.tsx
**Tags:** `bugfix`, `ux`, `ui`

Fixed message display in control UI to properly wrap long lines, preventing text overflow and improving readability of lengthy messages in the dashboard.

---

## 01729 — fix(macos): reduce node pairing polling
**SHA:** 6795e78edf · **Date:** 2025-12-19 13:58
**Files changed:** apps/macos/Sources/Clawdis/NodePairing.swift
**Tags:** `bugfix`, `performance`, `macos`

Optimized macOS node pairing by reducing the polling frequency for pairing status checks, decreasing CPU usage and battery consumption during pairing operations.

---

## 01730 — fix(ios): refine canvas and screen handling
**SHA:** 22f9322905 · **Date:** 2025-12-19 12:39
**Files changed:** apps/ios/Sources/Clawdis/Canvas/CanvasViewController.swift, apps/ios/Sources/Clawdis/Screen/ScreenViewController.swift
**Tags:** `bugfix`, `ux`, `ios`

Refined canvas and screen handling on iOS to improve stability and responsiveness when displaying remote content and handling screen recording interactions.

---

## 01731 — fix(macos): allow fractional timeout
**SHA:** f0705a928a · **Date:** 2025-12-19 12:40
**Files changed:** apps/macos/Sources/Clawdis/TimeoutConfig.swift
**Tags:** `bugfix`, `config`, `macos`

Fixed timeout configuration on macOS to accept fractional second values, allowing for more granular control over timing parameters in various operations.

---

## 01732 — build(canvas): refresh a2ui bundle
**SHA:** 2bc0c57f18 · **Date:** 2025-12-19 12:40
**Files changed:** apps/shared/ClawdisKit/Sources/ClawdisKit/Resources/CanvasA2UI/a2ui.bundle.js
**Tags:** `build`, `dependency`, `ui`

Refreshed the A2UI bundle build artifacts with updated dependencies and optimizations to ensure canvas rendering works smoothly across platforms.

---

## 01733 — Mac: add summarize tool
**SHA:** 47a1774dc0 · **Date:** 2025-12-19 17:46
**Files changed:** apps/macos/Sources/Clawdis/Tools/SummarizeTool.swift
**Tags:** `core-feature`, `macos`, `api`

Introduced a summarize tool for macOS that leverages Claude to provide concise summaries of selected content or documents.

---

## 01734 — style(macos): swiftformat sources
**SHA:** 8c6a592523 · **Date:** 2025-12-19 17:52
**Files changed:** apps/macos/Sources/Clawdis/**/*.swift
**Tags:** `cleanup`, `macos`

Applied swiftformat code style formatting to all macOS source files, ensuring consistent code style and improving maintainability of the Swift codebase.

---

## 01735 — chore(protocol): regenerate schema
**SHA:** a019d3cd83 · **Date:** 2025-12-19 17:52
**Files changed:** src/protocol/schema.ts, src/protocol/generated/
**Tags:** `config`, `api`

Regenerated protocol schema files based on updated protocol definitions, ensuring type definitions match the latest protocol specifications.

---

## 01736 — perf: move gateway env checks off main
**SHA:** 5e7d12fefa · **Date:** 2025-12-19 17:54
**Files changed:** src/gateway/environment.ts
**Tags:** `performance`, `devops`, `core-feature`

Optimized gateway initialization by moving environment variable checks off the main event loop, preventing blocking operations during startup.

---

## 01737 — chore: log gateway env timings
**SHA:** ba497ce57d · **Date:** 2025-12-19 17:54
**Files changed:** src/gateway/environment.ts
**Tags:** `logging`, `devops`, `config`

Added timing instrumentation to gateway environment initialization to help diagnose startup performance and identify slow environment checks.

---

## 01738 — chore: prep 2.0.0-beta1 release
**SHA:** 377169959d · **Date:** 2025-12-19 18:02
**Files changed:** package.json, CHANGELOG.md, version.txt
**Tags:** `config`, `process-lifecycle`

Prepared the codebase for 2.0.0-beta1 release by updating version numbers and changelog entries to reflect the milestone and features included in this beta release.

---

## 01739 — fix(ios): make parseA2UIActionBody nonisolated
**SHA:** aec1869d32 · **Date:** 2025-12-19 18:10
**Files changed:** apps/ios/Sources/Clawdis/Canvas/A2UIAction.swift
**Tags:** `bugfix`, `ios`, `api`

Fixed Swift concurrency isolation issue in iOS by marking parseA2UIActionBody function as nonisolated to allow proper integration with concurrent code paths.

---

## 01740 — perf: throttle gateway environment checks
**SHA:** fc7a63a4de · **Date:** 2025-12-19 18:21
**Files changed:** src/gateway/environment.ts
**Tags:** `performance`, `devops`, `core-feature`

Implemented throttling for gateway environment checks to prevent excessive repeated checks, reducing unnecessary CPU usage during continuous monitoring scenarios.

---

## 01741 — ci: lower iOS coverage gate
**SHA:** 5b193d014e · **Date:** 2025-12-19 18:23
**Files changed:** .github/workflows/ci.yml, coverage.config.js
**Tags:** `devops`, `testing`

Adjusted iOS test coverage requirements downward to a more realistic threshold, preventing CI failures due to overly strict coverage gates while still maintaining quality standards.

---

## 01742 — chore: update appcast for 2.0.0-beta1
**SHA:** 5bbf5105f1 · **Date:** 2025-12-19 18:24
**Files changed:** appcast.xml
**Tags:** `config`, `process-lifecycle`, `build`

Updated the application appcast feed to advertise the 2.0.0-beta1 release, enabling automatic update notifications for users with sparkle update framework enabled.

---

## 01743 — fix(deps): include playwright-core in dependencies
**SHA:** c0d5853c63 · **Date:** 2025-12-19 18:38
**Files changed:** package.json
**Tags:** `bugfix`, `dependency`, `config`

Added playwright-core as an explicit dependency in package.json, ensuring it's included in installations and resolving missing dependency errors in browser automation workflows.

---

## 01744 — docs: overhaul README architecture
**SHA:** 77104395ce · **Date:** 2025-12-19 18:41
**Files changed:** README.md
**Tags:** `documentation`, `core-feature`

Completely restructured the README documentation to better explain the overall architecture, system components, and how different pieces of the system fit together.

---

## 01745 — fix: surface gateway failure details
**SHA:** f929e1b105 · **Date:** 2025-12-19 18:48
**Files changed:** src/gateway/error-handler.ts
**Tags:** `bugfix`, `error-handling`, `devops`

Improved error reporting in gateway to surface detailed failure information instead of generic error messages, helping users diagnose and resolve gateway startup issues.

---

## 01746 — docs: document WhatsApp and Telegram config
**SHA:** 6cbfa01176 · **Date:** 2025-12-19 19:03
**Files changed:** docs/messaging-config.md
**Tags:** `documentation`, `config`, `api`

Created documentation for configuring WhatsApp and Telegram messaging integrations, including API keys, webhook setup, and troubleshooting guidance.

---

## 01747 — feat(templates): centralize workspace templates
**SHA:** 590f3d0e8f · **Date:** 2025-12-19 18:12
**Files changed:** src/templates/workspace-templates.ts
**Tags:** `core-feature`, `config`, `process-lifecycle`

Centralized workspace template definitions into a single location, making it easier to manage and extend available template options for new workspace creation.

---

## 01748 — fix: show Dock icon during onboarding
**SHA:** bd63b5a231 · **Date:** 2025-12-19 19:19
**Files changed:** apps/macos/Sources/Clawdis/AppDelegate.swift
**Tags:** `bugfix`, `ux`, `macos`, `ui`

Fixed the macOS application to display its Dock icon during the onboarding process, improving visibility and allowing users to easily access the application from the Dock.

---

## 01749 — feat(gateway): support bun-compiled embedded gateway
**SHA:** bb7f4abd4b · **Date:** 2025-12-19 19:20
**Files changed:** src/gateway/bun-gateway.ts, src/gateway/embedded.ts
**Tags:** `core-feature`, `devops`, `build`

Added support for running the embedded gateway as a bun-compiled binary, enabling faster startup and improved performance compared to interpreted Node.js scripts.

---

## 01750 — build(macos): bundle bun gateway
**SHA:** 98bbc73925 · **Date:** 2025-12-19 19:20
**Files changed:** apps/macos/Sources/Clawdis/GatewayManager.swift, build/macos-bundle.js
**Tags:** `build`, `macos`, `devops`

Configured macOS application bundle to include the pre-compiled bun gateway binary, eliminating the need for runtime Node.js and reducing application size and startup time.

---
