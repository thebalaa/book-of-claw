# Commit Reference: 01601–01650

A plain factual summary of every commit in the OpenClaw repository, from commit 1601 through commit 1650.

---

## 01601 — fix: make chat.abort reliable
**SHA:** 5c2288218f · **Date:** 2025-12-17 22:33
**Files changed:** src/gateway/server.test.ts, src/gateway/server.ts
**Tags:** `bugfix`, `testing`

Fixed race condition where chat.abort could fail when a session store was being saved. Added mock delay control in tests and relocated session state updates to occur before agent command execution to ensure abort signals are properly registered.

---

## 01602 — style: remove stale WebChat exclude
**SHA:** c7b80c28a1 · **Date:** 2025-12-17 23:31
**Files changed:** apps/macos/Package.swift
**Tags:** `cleanup`

Removed legacy WebChat resources exclusion from macOS package configuration since web-based assets are no longer used by the SwiftUI-only WebChat implementation.

---

## 01603 — feat: chat parity + wide-area discovery
**SHA:** d12ca22b19 · **Date:** 2025-12-17 23:49
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/MainViewModel.kt, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatScreen.kt
**Tags:** `core-feature`, `ui`

Added comprehensive chat features to Android including multi-session support, thinking levels, streaming assistant text, and pending tool calls. Implemented chat session switching and refresh capabilities to achieve feature parity with other platforms.

---

## 01604 — style: make chat more Material
**SHA:** 0e201c4c18 · **Date:** 2025-12-17 23:57
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/StatusPill.kt, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatComposer.kt
**Tags:** `ui`

Updated Android chat UI to follow Material Design 3 guidelines with refined colors, elevation, and borders for improved visual consistency.

---

## 01605 — style: Polish settings UI
**SHA:** 5f0e474be1 · **Date:** 2025-12-18 00:07
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/chat/ChatController.kt, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/SettingsSheet.kt
**Tags:** `ui`

Enhanced Android settings sheet with animated visibility toggles and improved disconnect handling to keep connection status visible in the UI pill rather than showing error messages.

---

## 01606 — style: Enable immersive fullscreen
**SHA:** 693215723a · **Date:** 2025-12-18 00:07
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/MainActivity.kt
**Tags:** `ui`

Implemented Android immersive mode to hide system UI bars on app creation and resume, providing a fullscreen experience for the chat interface.

---

## 01607 — refactor: Unify chat status label
**SHA:** ac4a65ddfd · **Date:** 2025-12-18 00:20
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatComposer.kt
**Tags:** `refactor`, `ui`

Refactored chat composer to accept session key parameter and unified status label display logic across the application.

---

## 01608 — style: Use Offline bridge status
**SHA:** abbe237cc0 · **Date:** 2025-12-18 00:20
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatScreen.kt, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/StatusPill.kt
**Tags:** `ui`

Updated Android status displays to use "Offline" terminology for bridge connection states instead of previous labels.

---

## 01609 — style: Use Offline bridge status
**SHA:** d3f4db649f · **Date:** 2025-12-18 00:20
**Files changed:** apps/ios/Clawdis/UI/StatusPill.swift
**Tags:** `ui`

Aligned iOS status displays with Android by using "Offline" terminology for bridge connection states.

---

## 01610 — style: Compact Instances row
**SHA:** 07c8fdffd1 · **Date:** 2025-12-18 00:24
**Files changed:** apps/macos/Clawdis/UI/Instances.swift
**Tags:** `ui`

Compacted the macOS Instances row layout for improved visual efficiency.

---

## 01611 — style: Remove Instances row duplication
**SHA:** 5693d7d733 · **Date:** 2025-12-18 00:28
**Files changed:** apps/macos/Clawdis/UI/Instances.swift
**Tags:** `cleanup`, `ui`

Removed duplicate Instances row entries in macOS application to eliminate redundant display information.

---

## 01612 — style: Use tonal surfaces for overlays
**SHA:** 579da8cc9b · **Date:** 2025-12-18 00:34
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatScreen.kt
**Tags:** `ui`

Updated Android overlay styling to use Material Design 3 tonal surface colors for improved visual hierarchy.

---

## 01613 — style: Improve idle background
**SHA:** 14fa2f47f5 · **Date:** 2025-12-18 00:41
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/IdleBackground.kt
**Tags:** `ui`

Refined Android idle background animation and appearance for better visual presentation.

---

## 01614 — style: Unify device + OS chip
**SHA:** cbb327227a · **Date:** 2025-12-18 00:43
**Files changed:** apps/macos/Clawdis/UI/Instances.swift
**Tags:** `ui`

Unified macOS display of device and OS chip information by combining previously separate display elements.

---

## 01615 — fix: Show idle background under WebView
**SHA:** ba204d0330 · **Date:** 2025-12-18 00:53
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/ChatScreen.kt
**Tags:** `bugfix`, `ui`

Fixed Android layout to properly display idle background beneath WebView content during loading and transition states.

---

## 01616 — style: Reorder settings sections
**SHA:** 7707e3d887 · **Date:** 2025-12-18 01:00
**Files changed:** apps/ios/Clawdis/UI/SettingsSheet.swift
**Tags:** `ui`

Reorganized iOS settings sheet section order for better information hierarchy.

---

## 01617 — style: Reorder settings sections
**SHA:** 4c656ea22f · **Date:** 2025-12-18 01:00
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/SettingsSheet.kt
**Tags:** `ui`

Reorganized Android settings sheet section order to match iOS for consistent cross-platform layout.

---

## 01618 — fix: Use system DNS for wide-area discovery
**SHA:** 1673bf2d44 · **Date:** 2025-12-18 01:04
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/BridgeEndpoint.kt
**Tags:** `bugfix`, `networking`

Fixed Android wide-area bridge discovery to use system DNS resolution instead of hardcoded DNS configuration for better reliability.

---

## 01619 — style: Respect system theme and clamp overlays
**SHA:** 99310a5bbb · **Date:** 2025-12-18 01:15
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/IdleBackground.kt
**Tags:** `ui`

Updated Android to respect system theme settings and apply proper clamping to overlay elevation values.

---

## 01620 — refactor: Include node caps + hardware in node.list
**SHA:** 9f731316 · **Date:** 2025-12-18 00:12
**Files changed:** src/gateway/server.ts, src/infra/bridge/server.test.ts
**Tags:** `refactor`, `core-feature`, `testing`

Extended Gateway node.list response to include node capabilities and hardware identifiers (device family, model identifier) for better node discovery and capability reporting.

---

## 01621 — refactor: Fetch node list via gateway
**SHA:** d862ae17eb · **Date:** 2025-12-18 00:12
**Files changed:** apps/macos/Clawdis/UI/Instances.swift
**Tags:** `refactor`, `core-feature`

Updated macOS to fetch node list through the Gateway instead of direct bridge connections for improved architecture consistency.

---

## 01622 — refactor: Unify idle background animation
**SHA:** f4b186a9d3 · **Date:** 2025-12-18 01:22
**Files changed:** apps/ios/Clawdis/UI/IdleBackground.swift, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/IdleBackground.kt
**Tags:** `refactor`, `ui`

Unified idle background animation implementation across iOS and Android for consistent appearance and behavior.

---

## 01623 — style: Allow settings light mode
**SHA:** 568fcbda54 · **Date:** 2025-12-18 01:29
**Files changed:** apps/ios/Clawdis/UI/SettingsSheet.swift
**Tags:** `ui`

Enabled light mode support for iOS settings sheet to respect user device theme preferences.

---

## 01624 — refactor: Persist and surface node capabilities
**SHA:** 99325040f8 · **Date:** 2025-12-18 01:36
**Files changed:** src/gateway/server.ts, src/infra/bridge/server.ts
**Tags:** `refactor`, `core-feature`

Implemented persistence and surfacing of node capabilities in both Gateway and Bridge servers to track and report node functionality.

---

## 01625 — docs: Document nodes status
**SHA:** 1a2d39bdf9 · **Date:** 2025-12-18 00:37
**Files changed:** README.md, docs/android/connect.md
**Tags:** `documentation`

Added documentation explaining the nodes status command and its capability to show paired nodes and their capabilities.

---

## 01626 — feat: Add nodes status
**SHA:** 460e170f7a · **Date:** 2025-12-18 00:37
**Files changed:** src/cli/nodes-cli.ts
**Tags:** `core-feature`

Implemented new `clawdis nodes status` command to display paired nodes with connection status and detailed capability information.

---

## 01627 — refactor: Drop legacy theme fallback
**SHA:** 3351c972e7 · **Date:** 2025-12-18 01:39
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/theme/Theme.kt
**Tags:** `refactor`, `cleanup`

Removed legacy theme fallback code from Android as Material Design 3 themes are now fully supported.

---

## 01628 — fix: Improve wide-area bridge discovery
**SHA:** 86225d0eb6 · **Date:** 2025-12-18 01:40
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/BridgeEndpoint.kt
**Tags:** `bugfix`, `networking`

Enhanced Android wide-area bridge discovery with improved DNS handling and error recovery for more reliable cross-network connections.

---

## 01629 — feat: Alias canvas.* invoke commands
**SHA:** f8bea661fc · **Date:** 2025-12-18 01:57
**Files changed:** apps/ios/Clawdis/Model/Bridge.swift
**Tags:** `core-feature`

Added canvas.* invoke command aliases to iOS Bridge to support new canvas-based commands alongside legacy screen.* commands.

---

## 01630 — fix: Decode UTF-8 TXT records
**SHA:** 2b2434d239 · **Date:** 2025-12-18 01:58
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/BridgeEndpoint.kt
**Tags:** `bugfix`, `networking`

Fixed Android to properly decode UTF-8 encoded TXT records during mDNS/Bonjour discovery for correct bridge information parsing.

---

## 01631 — fix: Improve webview compatibility
**SHA:** 6d60224c93 · **Date:** 2025-12-18 02:08
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/chat/CanvasScreen.kt
**Tags:** `bugfix`, `ui`

Improved Android WebView compatibility and handling for better rendering of canvas-based content and web interfaces.

---

## 01632 — feat: Add Voice Wake (foreground/always)
**SHA:** 60321352aa · **Date:** 2025-12-18 02:08
**Files changed:** apps/android/app/src/main/res/values/arrays.xml, apps/android/app/src/main/java/com/steipete/clawdis/node/ui/SettingsSheet.kt
**Tags:** `core-feature`, `ui`

Added Voice Wake feature to Android with configurable options for foreground-only or always-active modes.

---

## 01633 — refactor: Alias canvas.* for node.invoke
**SHA:** f973b9e0e5 · **Date:** 2025-12-18 01:10
**Files changed:** src/gateway/server.ts
**Tags:** `refactor`, `core-feature`

Implemented canvas.* command aliases in Gateway for node.invoke to support new canvas protocol while maintaining backward compatibility.

---

## 01634 — docs: Mention canvas.* alias
**SHA:** c976799f8c · **Date:** 2025-12-18 01:10
**Files changed:** src/cli/nodes-cli.ts, docs/cli.md
**Tags:** `documentation`

Added documentation and CLI references explaining the canvas.* aliases for node.invoke commands.

---

## 01635 — refactor: Centralize canvas commands and capabilities
**SHA:** 33bf5cf42a · **Date:** 2025-12-18 02:12
**Files changed:** apps/ios/Clawdis/Model/Bridge.swift
**Tags:** `refactor`, `core-feature`

Centralized canvas command and capability definitions in iOS Bridge model for maintainability and consistency.

---

## 01636 — test: Test bridge auto-reconnect
**SHA:** ea53f1bec7 · **Date:** 2025-12-18 02:18
**Files changed:** apps/android/app/src/androidTest/java/com/steipete/clawdis/node/bridge/BridgeClientTest.kt
**Tags:** `testing`

Added test coverage for Android bridge auto-reconnect functionality to ensure reliable reconnection behavior.

---

## 01637 — refactor: Switch node.invoke screen.* to canvas.*
**SHA:** 22516437b7 · **Date:** 2025-12-18 01:17
**Files changed:** docs/protocol.md, src/protocol/index.ts
**Tags:** `refactor`, `core-feature`

Changed Protocol specification to use canvas.* namespace instead of screen.* for node.invoke commands, reflecting the improved canvas system.

---

## 01638 — refactor: Handle canvas.* commands on iOS/Android
**SHA:** 21a27e3b65 · **Date:** 2025-12-18 01:17
**Files changed:** apps/ios/Clawdis/Model/Bridge.swift, apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/BridgeClient.kt
**Tags:** `refactor`, `core-feature`

Updated iOS and Android node implementations to properly handle and process canvas.* invoke commands.

---

## 01639 — docs: Document canvas.* node.invoke commands
**SHA:** 272015c701 · **Date:** 2025-12-18 01:17
**Files changed:** docs/protocol.md, docs/cli.md
**Tags:** `documentation`

Added comprehensive documentation for canvas.* node.invoke commands explaining new canvas-based interaction capabilities.

---

## 01640 — test: Loosen chat.abort mismatch timeout
**SHA:** 7bb058215d · **Date:** 2025-12-18 01:20
**Files changed:** src/gateway/server.test.ts
**Tags:** `testing`

Increased timeout tolerance in chat.abort mismatch test to handle slower test environments and reduce flakiness.

---

## 01641 — fix: Harden idle background animation
**SHA:** 3df53836ca · **Date:** 2025-12-18 02:27
**Files changed:** apps/ios/Clawdis/UI/IdleBackground.swift
**Tags:** `bugfix`, `ui`

Hardened iOS idle background animation with improved error handling and edge case handling for reliable animation behavior.

---

## 01642 — refactor: Centralize canvas protocol strings
**SHA:** cd719a8c85 · **Date:** 2025-12-18 02:32
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/CanvasProtocol.kt
**Tags:** `refactor`

Centralized canvas protocol string constants in Android to reduce duplication and improve maintainability.

---

## 01643 — feat: Hide connected bridge from discovery list
**SHA:** ce1a8d70d9 · **Date:** 2025-12-18 02:37
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/ui/DiscoverySheet.kt
**Tags:** `core-feature`, `ui`

Modified Android discovery UI to hide the currently connected bridge from the available bridges list to prevent accidental re-selection.

---

## 01644 — feat: Persist advertised invoke commands
**SHA:** 54830e8401 · **Date:** 2025-12-18 02:04
**Files changed:** src/infra/bridge/server.ts
**Tags:** `core-feature`

Implemented persistence of advertised invoke commands in Bridge server to track and recall node-supported commands across restarts.

---

## 01645 — feat: Advertise canvas invoke commands
**SHA:** efed2ae30f · **Date:** 2025-12-18 02:05
**Files changed:** src/infra/bridge/server.ts, apps/ios/Clawdis/Model/Bridge.swift
**Tags:** `core-feature`

Added advertising of canvas invoke commands from nodes to the Bridge, allowing clients to discover available canvas capabilities.

---

## 01646 — refactor: List/describe node capabilities and commands
**SHA:** 742027a447 · **Date:** 2025-12-18 02:05
**Files changed:** src/gateway/server.ts
**Tags:** `refactor`, `core-feature`

Extended Gateway node.list and node.describe endpoints to include capabilities and available commands for better node introspection.

---

## 01647 — feat: Add clawdis-mac node describe and verbose list
**SHA:** 82d8526732 · **Date:** 2025-12-18 02:05
**Files changed:** apps/macos/Clawdis/UI/Instances.swift
**Tags:** `core-feature`, `ui`

Added node describe command and verbose listing to macOS to display detailed node capabilities and command information.

---

## 01648 — docs: Expose node metadata and commands
**SHA:** 57ee34839d · **Date:** 2025-12-18 02:05
**Files changed:** src/cli/nodes-cli.ts, docs/cli.md
**Tags:** `documentation`

Updated CLI and documentation to expose node metadata, commands, and capabilities in status and describe output.

---

## 01649 — refactor: Drop screen.* invoke aliases
**SHA:** f2d503ad04 · **Date:** 2025-12-18 02:17
**Files changed:** apps/android/app/src/main/java/com/steipete/clawdis/node/bridge/CanvasProtocol.kt
**Tags:** `refactor`, `cleanup`

Removed deprecated screen.* invoke command aliases from Android now that canvas.* commands are fully implemented.

---

## 01650 — style: Improve idle background blend mode fallback
**SHA:** 6f1ae147da · **Date:** 2025-12-18 08:32
**Files changed:** apps/ios/Clawdis/UI/IdleBackground.swift
**Tags:** `ui`

Enhanced iOS idle background with better fallback handling for blend mode compatibility across different iOS versions.

---
