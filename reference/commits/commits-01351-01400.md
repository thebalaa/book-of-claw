# Commit Reference: 01351–01400

A plain factual summary of every commit in the OpenClaw repository, from commit 1351 through commit 1400.

---

## 01351 — chore(ci): sync protocol + swiftformat
**SHA:** dd763b45e1 · **Date:** 2025-12-14 00:36
**Files changed:** apps/macos/Sources/Clawdis/Bridge/BridgeServer.swift, apps/macos/Sources/Clawdis/WebChatSwiftUI.swift, apps/macos/Sources/ClawdisProtocol/GatewayModels.swift
**Tags:** `cleanup`, `refactor`

Reformatted Swift files and reordered imports to match swiftformat style guidelines. Updated BridgeServer to add NodeListParams struct and idempotencyKey parameter to NodeInvokeParams. Changed numeric literals from underscore-separated format (30_000) to compact format (30000).

---

## 01352 — docs(site): note fn+F2 on mac
**SHA:** e96654ced1 · **Date:** 2025-12-14 00:42
**Files changed:** CHANGELOG.md
**Tags:** `documentation`

Updated CHANGELOG to remove beta notes and clarify the main release focus on macOS companion app integration. Adjusted release notes to reflect current feature set.

---

## 01353 — Merge remote-tracking branch 'origin/main'
**SHA:** ffc57d5f20 · **Date:** 2025-12-14 00:43
**Files changed:** CHANGELOG.md
**Tags:** `cleanup`

Merge commit integrating remote changes back into the feature branch.

---

## 01354 — feat(ios): pulse settings indicator
**SHA:** 862a49003 · **Date:** 2025-12-14 00:48
**Files changed:** apps/ios/Sources/RootTabs.swift
**Tags:** `ui`, `core-feature`

Added animated pulse effect to the iOS settings tab indicator with opacity and scale animations to show active connection state.

---

## 01355 — feat(ios): reconnect to last discovered gateway
**SHA:** 2454e67e0 · **Date:** 2025-12-14 00:48
**Files changed:** apps/ios/Sources/Bridge/BridgeConnectionController.swift
**Tags:** `core-feature`

Enhanced BridgeConnectionController to track and reconnect to previously discovered gateway bridges by storing and retrieving stable IDs from UserDefaults.

---

## 01356 — feat(camera): add snap/clip capture
**SHA:** a92eb1f33d · **Date:** 2025-12-14 00:48
**Files changed:** apps/ios/Sources/Camera/CameraController.swift
**Tags:** `core-feature`

Introduced new CameraController actor for iOS to handle photo/video capture via AVFoundation, supporting facing selection and codec configuration.

---

## 01357 — docs(telegram): clarify polling + webhook config
**SHA:** 8fb064ed7 · **Date:** 2025-12-14 00:49
**Files changed:** docs/telegram.md
**Tags:** `documentation`

Expanded Telegram documentation to clarify long-polling as the default method and provide detailed webhook configuration instructions with URL and secret setup guidance.

---

## 01358 — docs(remote): clarify ssh tunneling
**SHA:** 700212608a · **Date:** 2025-12-14 00:49
**Files changed:** docs/remote.md
**Tags:** `documentation`

Revised remote mode documentation to emphasize SSH tunneling topology and updated control channel descriptions for modern WebSocket-based gateway architecture.

---

## 01359 — docs: clarify legacy control + sessions path
**SHA:** a80cd2634 · **Date:** 2025-12-14 00:49
**Files changed:** docs/control-api.md, docs/health.md
**Tags:** `documentation`

Updated control API documentation to mark it as deprecated historical reference and clarified that modern builds use WebSocket Gateway protocol instead of TCP control channel.

---

## 01360 — docs: refer to session store
**SHA:** 128df5700 · **Date:** 2025-12-14 00:50
**Files changed:** docs/group-messages.md, docs/refactor/webagent-session.md
**Tags:** `documentation`

Updated documentation to standardize terminology for session storage path references in group message and web agent session documentation.

---

## 01361 — docs(clawd): update install + session store path
**SHA:** 441bd25f9 · **Date:** 2025-12-14 00:50
**Files changed:** docs/clawd.md
**Tags:** `documentation`

Updated Clawd setup documentation with installation instructions from source using pnpm and clarified session metadata file path as `~/.clawdis/sessions/sessions.json`.

---

## 01362 — docs(index): update architecture + quickstart
**SHA:** 00f83ca7a · **Date:** 2025-12-14 00:50
**Files changed:** docs/index.md
**Tags:** `documentation`

Refreshed main documentation index with updated architecture diagram showing Gateway and Bridge topology, changed npm link to GitHub Releases.

---

## 01363 — docs(site): refresh footer + agent blurb
**SHA:** affbd48a3 · **Date:** 2025-12-14 00:50
**Files changed:** docs/AGENTS.default.md, docs/_layouts/default.html
**Tags:** `documentation`, `ui`

Updated footer links from npm to GitHub Releases and refined agent description to include session consolidation behavior for direct chats into main session.

---

## 01364 — docs(site): fix Clawd setup link
**SHA:** 13e1c93c7 · **Date:** 2025-12-14 00:52
**Files changed:** docs/index.md
**Tags:** `documentation`

Corrected documentation link for Clawd setup from relative path to proper permalink URL.

---

## 01365 — docs: sync telegram + remote summaries
**SHA:** 1638d32e1 · **Date:** 2025-12-14 00:52
**Files changed:** docs/clawd-md.md, docs/index.md, docs/grammy.md
**Tags:** `documentation`

Added redirect page for clawd-md.md and synchronized Telegram and remote documentation with latest feature descriptions and configuration guidance.

---

## 01366 — Merge origin/main
**SHA:** 099b8c9fa · **Date:** 2025-12-14 00:52
**Files changed:** docs/grammy.md, docs/remote.md
**Tags:** `cleanup`

Merge commit integrating origin/main changes.

---

## 01367 — Merge remote-tracking branch 'origin/main'
**SHA:** 13c4f8da2 · **Date:** 2025-12-14 00:52
**Files changed:** docs/grammy.md, docs/remote.md
**Tags:** `cleanup`

Merge commit resolving changes from origin/main into feature branch.

---

## 01368 — test(cli): cover camera flags
**SHA:** ebbc416d4 · **Date:** 2025-12-14 00:54
**Files changed:** docs/clawd-md.md, docs/index.md
**Tags:** `testing`

Removed clawd-md.md redirect and fixed index.md Clawd link as part of test cleanup. Consolidated documentation structure.

---

## 01369 — Merge remote-tracking branch 'origin/main'
**SHA:** 38f65e705 · **Date:** 2025-12-14 00:55
**Files changed:** docs/clawd-md.md, docs/index.md
**Tags:** `cleanup`

Merge commit resolving origin/main with current branch state.

---

## 01370 — docs(site): update docs nav
**SHA:** 037ea9267 · **Date:** 2025-12-14 00:55
**Files changed:** docs/_config.yml
**Tags:** `documentation`, `ui`

Expanded documentation navigation menu to include Clawd Setup, Remote, Discovery, macOS App, and iOS Node sections in _config.yml to improve navigation structure.

---

## 01371 — fix(webchat): stream assistant events and correlate runId
**SHA:** 2583fb66c · **Date:** 2025-12-14 00:56
**Files changed:** src/commands/agent.ts, src/gateway/server.ts
**Tags:** `bugfix`, `core-feature`

Added onAgentEvent callback to agent command and updated gateway server to track agent sessionId to clientRunId mapping for WebChat event delivery, enabling proper event streaming and correlation.

---

## 01372 — fix(mac): move menu separator below context card
**SHA:** 09541de07 · **Date:** 2025-12-14 00:57
**Files changed:** apps/macos/Sources/Clawdis/MenuContextCardInjector.swift
**Tags:** `bugfix`, `ui`

Improved menu item insertion logic to place context card above the separator and fallback to first item insertion when separator not found, enhancing menu layout.

---

## 01373 — fix(ios): use mac icon + avoid voice wake crash
**SHA:** 0336c1fa3 · **Date:** 2025-12-14 01:09
**Files changed:** apps/ios/Sources/Assets.xcassets/AppIcon.appiconset/Contents.json
**Tags:** `bugfix`, `ui`

Created new AppIcon asset catalog with all required iOS icon sizes (1024x1024 down to 20x20 across iPhone and iPad idioms) to ensure proper app icon display and stability.

---

## 01374 — chore(macos): swiftformat
**SHA:** 25eb40ab3 · **Date:** 2025-12-14 01:11
**Files changed:** apps/macos/Sources/Clawdis/CameraCaptureService.swift, apps/macos/Sources/ClawdisCLI/ClawdisCLI.swift
**Tags:** `cleanup`, `refactor`

Applied swiftformat to macOS code, updating numeric literals from underscore-separated to compact format and improving function parameter formatting for clarity.

---

## 01375 — fix(web): heartbeat fallback after group inbound
**SHA:** 8b6abe015 · **Date:** 2025-12-14 01:26
**Files changed:** src/web/auto-reply.test.ts
**Tags:** `bugfix`, `testing`

Added test case and fallback logic to use heartbeat inbound message for reply delivery when last inbound is a group chat, preventing routing to incorrect recipients.

---

## 01376 — chore(mac): sync vendored Peekaboo
**SHA:** 7789bf690 · **Date:** 2025-12-14 01:47
**Files changed:** Peekaboo
**Tags:** `dependency`

Updated vendored Peekaboo submodule to latest version.

---

## 01377 — fix(ios): ensure app icon asset catalog
**SHA:** 66b05163e · **Date:** 2025-12-14 01:50
**Files changed:** apps/ios/project.yml
**Tags:** `bugfix`, `config`

Updated iOS project configuration to properly include Assets.xcassets in the build by removing source exclusion and correcting resource paths, enabling app icon resolution.

---

## 01378 — feat(macos): refresh tools roster
**SHA:** dd7be2bfd · **Date:** 2025-12-14 01:54
**Files changed:** apps/macos/Sources/Clawdis/ToolsSettings.swift
**Tags:** `core-feature`, `ux`

Added wacli (WhatsApp CLI) to tools roster and improved descriptions for eightctl and imsg to be more concise and user-focused.

---

## 01379 — feat(gateway): add bridge RPC chat history and push
**SHA:** dccdc950b · **Date:** 2025-12-14 01:54
**Files changed:** src/gateway/server.test.ts
**Tags:** `core-feature`, `api`

Extended gateway bridge server test scaffolding to support onEvent and onRequest callbacks for handling bridge RPC chat history queries and push notifications from connected nodes.

---

## 01380 — feat(ios): unify manual bridge config and auto-reconnect
**SHA:** e2451484d · **Date:** 2025-12-14 01:54
**Files changed:** apps/ios/Sources/Bridge/BridgeConnectionController.swift
**Tags:** `core-feature`, `ux`

Refactored iOS bridge connection logic to support both manual bridge configuration (via host/port settings) and automatic reconnect to last discovered gateway, with configurable manual mode toggle.

---

## 01381 — feat(android): add Compose node app (bridge+canvas+chat+camera)
**SHA:** b2378c01e · **Date:** 2025-12-14 01:54
**Files changed:** apps/android/.gitignore, apps/android/README.md, apps/android/app/build.gradle.kts
**Tags:** `core-feature`

Introduced new Android node application using Jetpack Compose, implementing bridge client connectivity with Canvas, Chat, and Camera capabilities matching iOS Iris parity.

---

## 01382 — fix(web): use heartbeat inbound msg for delivery
**SHA:** 694a10f60 · **Date:** 2025-12-14 01:55
**Files changed:** src/web/auto-reply.ts
**Tags:** `bugfix`

Fixed heartbeat reply delivery to use heartbeatInboundMsg instead of lastInboundMsg, ensuring replies from heartbeat loops route to correct recipient.

---

## 01383 — feat(macos): add OpenAI Whisper tool
**SHA:** e8018d800 · **Date:** 2025-12-14 01:56
**Files changed:** apps/macos/Sources/Clawdis/ToolsSettings.swift, docs/AGENTS.default.md
**Tags:** `core-feature`, `documentation`

Added OpenAI Whisper speech-to-text tool to macOS app and updated documentation to include it in the core tools list for dictation and transcription workflows.

---

## 01384 — fix(ios): remove white border from app icon
**SHA:** e9eb9edc2 · **Date:** 2025-12-14 01:57
**Files changed:** apps/ios/Sources/Assets.xcassets/AppIcon.appiconset/icon-1024.png
**Tags:** `bugfix`, `ui`

Updated all iOS app icon PNG files to remove white borders and improve visual consistency across all device sizes and scales.

---

## 01385 — feat(camera): share jpeg transcoder + default maxWidth
**SHA:** c3fa1fb73 · **Date:** 2025-12-14 01:56
**Files changed:** apps/ios/Sources/Camera/CameraController.swift
**Tags:** `core-feature`, `refactor`

Refactored camera image encoding to use shared JPEGTranscoder and implemented 1600px default maxWidth to balance quality and payload size for bridge transmission.

---

## 01386 — test(macos): cover camera snap defaults
**SHA:** 88ff2f79d · **Date:** 2025-12-14 01:57
**Files changed:** apps/macos/Tests/ClawdisIPCTests/CameraCaptureServiceTests.swift
**Tags:** `testing`

Added unit tests for CameraCaptureService to verify default values (maxWidth: 1600, quality: 0.9) and clamping behavior for snap parameters.

---

## 01387 — chore(mac): sync vendored Peekaboo
**SHA:** b944bee12 · **Date:** 2025-12-14 02:00
**Files changed:** Peekaboo
**Tags:** `dependency`

Updated vendored Peekaboo submodule to latest version.

---

## 01388 — feat(android): keep node connected via foreground service
**SHA:** b792175ec · **Date:** 2025-12-14 02:01
**Files changed:** apps/android/app/src/main/AndroidManifest.xml
**Tags:** `core-feature`, `persistence`

Added foreground service configuration to Android manifest to keep the node connection alive with persistent notification, preventing app suspension and ensuring continuous bridge connectivity.

---

## 01389 — fix(ios): set CFBundleIconName
**SHA:** c66122c25 · **Date:** 2025-12-14 02:05
**Files changed:** apps/ios/Sources/Info.plist
**Tags:** `bugfix`, `config`

Added CFBundleIconName property to iOS Info.plist pointing to AppIcon asset catalog, ensuring proper app icon resolution and display on all iOS devices.

---

## 01390 — test(ios): add unit test target
**SHA:** 64b5eb827 · **Date:** 2025-12-14 02:05
**Files changed:** apps/ios/Tests/BridgeEndpointIDTests.swift
**Tags:** `testing`

Introduced unit test suite for bridge endpoint ID handling with tests for service name decoding, bonjour escape sequence handling, and endpoint ID stability.

---

## 01391 — feat(ios): add fastlane setup
**SHA:** a1d16c61e · **Date:** 2025-12-14 02:10
**Files changed:** .gitignore, apps/ios/README.md
**Tags:** `core-feature`, `devops`

Added fastlane configuration directory to .gitignore and updated iOS README with fastlane setup instructions for automated builds and beta distribution.

---

## 01392 — test(android): add bridge unit tests
**SHA:** df8915cf5 · **Date:** 2025-12-14 02:13
**Files changed:** apps/android/app/build.gradle.kts, apps/android/app/src/test/java/com/steipete/clawdis/node/bridge/BridgePairingClientTest.kt
**Tags:** `testing`

Added Kotlin unit test dependencies and comprehensive test suite for BridgePairingClient covering message frame handling and pairing protocol verification.

---

## 01393 — docs(android): expand node README
**SHA:** 67707763f · **Date:** 2025-12-14 02:14
**Files changed:** apps/android/README.md
**Tags:** `documentation`

Expanded Android README with detailed notes on foreground service persistence, shared session keys, and build/test commands for developers.

---

## 01394 — chore(android): bump AGP to 8.6.1
**SHA:** 4abc551f9 · **Date:** 2025-12-14 02:16
**Files changed:** apps/android/build.gradle.kts
**Tags:** `dependency`, `devops`

Updated Android Gradle Plugin version from 8.5.2 to 8.6.1 for latest toolchain features and compatibility improvements.

---

## 01395 — test(ios): share scheme and add deep link tests
**SHA:** 20abf3109 · **Date:** 2025-12-14 02:17
**Files changed:** apps/ios/Tests/DeepLinkParserTests.swift
**Tags:** `testing`

Added comprehensive test suite for deep link parsing validating clawdis:// URL scheme handling, parameter extraction, and rejection of invalid inputs.

---

## 01396 — fix(ios): show connection status badge
**SHA:** 138f4bd85 · **Date:** 2025-12-14 02:17
**Files changed:** apps/android/README.md
**Tags:** `bugfix`, `ui`

Updated Android README documentation state noting it reflects prototype parity with Iris.

---

## 01397 — Merge remote-tracking branch 'origin/main' into tmp/ios-statusicon
**SHA:** 1fb123d70 · **Date:** 2025-12-14 02:18
**Files changed:** apps/android/README.md
**Tags:** `cleanup`

Merge commit integrating origin/main changes into iOS status icon feature branch.

---

## 01398 — fix(ios): make connection badge visible
**SHA:** b8b20eac6 · **Date:** 2025-12-14 02:19
**Files changed:** apps/ios/Sources/RootTabs.swift
**Tags:** `bugfix`, `ui`

Fixed iOS settings tab badge visibility by changing badgeValue from space character to empty string, ensuring proper badge rendering when connection status changes.

---

## 01399 — chore(fastlane): support p8 key path
**SHA:** 322a36f36 · **Date:** 2025-12-14 02:19
**Files changed:** apps/android/build.gradle.kts, apps/ios/Sources/RootTabs.swift
**Tags:** `devops`, `config`

Reverted Android AGP to 8.5.2 and restored iOS RootTabs UIKit import while maintaining fastlane configuration updates for p8 key path support.

---

## 01400 — chore(fastlane): support p8 key path
**SHA:** 7318b20f5 · **Date:** 2025-12-14 02:19
**Files changed:** apps/android/build.gradle.kts, apps/ios/Sources/RootTabs.swift
**Tags:** `devops`, `config`

Bumped Android AGP back to 8.6.1 and restored iOS settings tab badge visibility fixes with connection indicator styling.

---
