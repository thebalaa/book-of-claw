# Commit Reference: 01401–01450

A plain factual summary of every commit in the OpenClaw repository, from commit 1401 through commit 1450.

---

## 01401 — chore(mac): bump Peekaboo submodule
**SHA:** 259e9cfccf · **Date:** 2025-12-14 02:31
**Files changed:** Peekaboo, apps/android/build.gradle.kts, apps/ios/Sources/RootTabs.swift, apps/ios/Tests/DeepLinkParserTests.swift, apps/ios/project.yml
**Tags:** `dependency`, `cleanup`

Updated the Peekaboo submodule to the latest version and adjusted Android build configuration. Removed UIKit import and refactored iOS Settings tab indicator from badge-based UI to custom SwiftUI overlay with animated glow effects. Deleted deprecated DeepLinkParserTests suite and simplified project configuration by removing test scheme definitions.

---

## 01402 — fix(camera): modernize mp4 export
**SHA:** f86b1cf6a1 · **Date:** 2025-12-14 02:34
**Files changed:** apps/ios/Sources/Camera/CameraController.swift, apps/macos/Sources/Clawdis/CameraCaptureService.swift
**Tags:** `bugfix`, `core-feature`

Modernized MP4 export functionality by replacing deprecated AVAsset with AVURLAsset and using the newer AVAssetExportSession.export(to:as:) API for iOS 18.0+ and macOS 15.0+. Maintained backward compatibility with older OS versions through version availability checks. Code now uses async/await patterns instead of callback-based continuations.

---

## 01403 — fix(ios): make fastlane beta lane work
**SHA:** 10d95348b1 · **Date:** 2025-12-14 02:35
**Files changed:** .gitignore, apps/ios/README.md, apps/ios/fastlane/Fastfile, apps/ios/fastlane/Matchfile
**Tags:** `bugfix`, `devops`, `build`

Fixed fastlane beta lane configuration by updating gitignore patterns for fastlane artifacts and build outputs. Updated README with proper fastlane setup instructions and configured Fastfile with correct certificate matching and provisioning profile handling. Added Matchfile configuration for fastlane match to manage signing certificates.

---

## 01404 — fix(ios): make fastlane beta lane work
**SHA:** c4d0eb9350 · **Date:** 2025-12-14 02:35
**Files changed:** apps/ios/fastlane/Fastfile
**Tags:** `bugfix`, `devops`, `build`

Refined fastlane Fastfile configuration to properly handle beta lane deployment. Corrected lane definitions and ensured proper integration with Xcode build system for beta distribution. Configuration now correctly handles signing and provisioning for beta builds.

---

## 01405 — Merge remote-tracking branch 'origin/main'
**SHA:** 455fe15bd1 · **Date:** 2025-12-14 02:37
**Files changed:** Peekaboo, apps/ios/Sources/Camera/CameraController.swift, apps/macos/Sources/Clawdis/CameraCaptureService.swift
**Tags:** `cleanup`

Integrated changes from remote main branch into local development branch. Merged updates including Peekaboo submodule bump and camera export modernization from preceding commits.

---

## 01406 — chore(deps): bump pnpm dependencies
**SHA:** cf747e1b82 · **Date:** 2025-12-14 02:21
**Files changed:** package.json, pnpm-lock.yaml
**Tags:** `dependency`, `devops`

Updated all pnpm package dependencies to latest compatible versions. Regenerated lock file to reflect dependency resolution and security updates across the project.

---

## 01407 — chore(android): update toolchain and deps
**SHA:** eaebf4b896 · **Date:** 2025-12-14 02:30
**Files changed:** apps/android/build.gradle.kts, gradle.properties
**Tags:** `dependency`, `devops`, `build`

Updated Android build toolchain versions and dependencies. Bumped Kotlin, AGP (Android Gradle Plugin), and supporting library versions to maintain compatibility with latest Android SDK and tooling.

---

## 01408 — test(ios): add bridge session + keychain suites
**SHA:** 974ab5a8dd · **Date:** 2025-12-14 02:32
**Files changed:** apps/ios/Tests/BridgeSessionTests.swift, apps/ios/Tests/KeychainTests.swift
**Tags:** `testing`, `core-feature`

Added comprehensive test suites for iOS bridge session management and keychain integration. Tests cover session establishment, authentication, and secure credential storage through the iOS keychain.

---

## 01409 — ci: run iOS xcodebuild tests
**SHA:** 1d79254053 · **Date:** 2025-12-14 02:32
**Files changed:** .github/workflows/ios-tests.yml
**Tags:** `testing`, `devops`, `ci`

Configured GitHub Actions workflow to run iOS unit tests using xcodebuild. Added test target selection, coverage reporting, and result upload for CI/CD pipeline integration.

---

## 01410 — fix(ios): timeout bridge connect
**SHA:** 1c0170554e · **Date:** 2025-12-14 02:41
**Files changed:** apps/ios/Sources/Bridge/BridgeClient.swift
**Tags:** `bugfix`, `core-feature`, `error-handling`

Added timeout handling to iOS bridge connection logic. Connection attempts now fail gracefully after a specified duration instead of hanging indefinitely, improving UX when connection establishment fails.

---

## 01411 — test(ios): cover voice trigger + camera clamps
**SHA:** 6bf1e6fa06 · **Date:** 2025-12-14 02:43
**Files changed:** apps/ios/Tests/VoiceTriggerTests.swift, apps/ios/Tests/CameraClampTests.swift
**Tags:** `testing`

Added test coverage for iOS voice trigger functionality and camera constraint enforcement. Tests validate voice activation detection and camera frame constraints during operation.

---

## 01412 — test(ios): cover settings host/port parsing
**SHA:** dbd3865e3b · **Date:** 2025-12-14 02:46
**Files changed:** apps/ios/Tests/SettingsParsingTests.swift
**Tags:** `testing`

Added test suite to validate iOS settings view parsing of host and port configuration. Tests ensure proper handling of various input formats and edge cases in network settings.

---

## 01413 — fix(macos): avoid health polling in tests
**SHA:** 3b35b762cb · **Date:** 2025-12-14 02:54
**Files changed:** apps/macos/Tests/HealthCheckTests.swift
**Tags:** `bugfix`, `testing`

Fixed macOS test suite to disable health polling during test execution. Prevents background health checks from interfering with test assertions and timing-sensitive test scenarios.

---

## 01414 — test(macos): add settings view smoke coverage
**SHA:** 5ace7c9c66 · **Date:** 2025-12-14 02:54
**Files changed:** apps/macos/Tests/SettingsViewTests.swift
**Tags:** `testing`, `ux`

Added smoke test coverage for macOS Settings view. Tests verify basic UI rendering, user interaction handling, and settings persistence across application sessions.

---

## 01415 — fix: expand reply cwd (~) and document AGENTS
**SHA:** 507f5623f4 · **Date:** 2025-12-14 02:59
**Files changed:** AGENTS.md, core/reply.ts
**Tags:** `bugfix`, `documentation`, `core-feature`

Fixed reply working directory expansion to properly handle tilde (~) home directory shortcuts. Added comprehensive AGENTS.md documentation explaining agent configuration, workspace setup, and usage patterns.

---

## 01416 — fix(ios): satisfy Sendable in bridge timeout
**SHA:** 7b1163f75c · **Date:** 2025-12-14 03:00
**Files changed:** apps/ios/Sources/Bridge/BridgeClient.swift
**Tags:** `bugfix`

Fixed Swift concurrency compliance by ensuring BridgeClient timeout handler satisfies Sendable protocol requirements. Resolves compiler errors when using timeout logic in actor-isolated contexts.

---

## 01417 — feat(ios): add always-on status overlay
**SHA:** d7165b4720 · **Date:** 2025-12-14 03:00
**Files changed:** apps/ios/Sources/StatusOverlay.swift
**Tags:** `core-feature`, `ui`

Implemented always-on status overlay for iOS that displays bridge connectivity state and important status information persistently on screen. Includes connection indicators and status messaging.

---

## 01418 — test(macos): cover settings + activity models
**SHA:** 745eefe0be · **Date:** 2025-12-14 03:06
**Files changed:** apps/macos/Tests/SettingsModelTests.swift, apps/macos/Tests/ActivityModelTests.swift
**Tags:** `testing`

Added test coverage for macOS settings and activity data models. Tests validate model state management, data persistence, and proper integration between settings and activity tracking.

---

## 01419 — ci: emit swift + iOS coverage
**SHA:** 05e77b69c4 · **Date:** 2025-12-14 03:04
**Files changed:** .github/workflows/ci.yml
**Tags:** `testing`, `devops`, `ci`

Updated CI workflow to emit Swift compilation details and collect iOS test coverage metrics. Configured coverage report generation and integration with coverage tracking services.

---

## 01420 — fix(android): inset top buttons for status bar
**SHA:** 35e8dae939 · **Date:** 2025-12-14 03:10
**Files changed:** apps/android/src/main/java/com/clawdis/ui/MainActivity.kt
**Tags:** `bugfix`, `ui`

Fixed Android UI layout to properly inset top buttons below the system status bar. Prevents button overlap with status bar and ensures proper spacing in the activity's view hierarchy.

---

## 01421 — fix(android): make settings sheet scrollable
**SHA:** 41da61dd6a · **Date:** 2025-12-14 03:13
**Files changed:** apps/android/src/main/res/layout/settings_sheet.xml
**Tags:** `bugfix`, `ui`

Made Android settings bottom sheet scrollable to accommodate large numbers of settings options. Prevents content cutoff on smaller screens and improves accessibility of settings UI.

---

## 01422 — feat: bootstrap agent workspace and AGENTS.md
**SHA:** 073285409b · **Date:** 2025-12-14 03:14
**Files changed:** scripts/bootstrap-agent-workspace.js, AGENTS.md, docs/agent-setup.md
**Tags:** `core-feature`, `documentation`, `process-lifecycle`

Implemented agent workspace bootstrapping functionality that initializes a new agent environment with required configuration files and directory structure. Created AGENTS.md specification document and setup guide for agent creation and management.

---

## 01423 — chore(ios): gitignore provisioning profiles
**SHA:** 4dd9072a2b · **Date:** 2025-12-14 03:16
**Files changed:** .gitignore
**Tags:** `cleanup`, `build`

Added provisioning profile patterns to .gitignore to prevent accidental commit of iOS signing certificates and provisioning profiles, protecting sensitive credential files.

---

## 01424 — docs: recommend git repo for workspace backups
**SHA:** a5b3b8743a · **Date:** 2025-12-14 03:18
**Files changed:** docs/backup-strategy.md
**Tags:** `documentation`

Updated documentation to recommend using a Git repository for agent workspace backups. Provides guidance on backup strategy, versioning, and recovery procedures.

---

## 01425 — test(ios): add smoke coverage tests
**SHA:** eec6212cdf · **Date:** 2025-12-14 03:25
**Files changed:** apps/ios/Tests/SmokeTests.swift
**Tags:** `testing`

Added smoke test suite for iOS application covering basic navigation, UI rendering, and critical user flows. Provides rapid feedback on regressions in core functionality.

---

## 01426 — ci: enforce 40% iOS coverage
**SHA:** 56bbcfc3ee · **Date:** 2025-12-14 03:25
**Files changed:** .github/workflows/ci.yml
**Tags:** `testing`, `devops`, `ci`

Added minimum code coverage threshold of 40% for iOS tests in CI pipeline. Build fails if coverage drops below threshold, enforcing test coverage standards.

---

## 01427 — ci: add Android build job
**SHA:** 7dd8a7f2e3 · **Date:** 2025-12-14 03:31
**Files changed:** .github/workflows/android-build.yml
**Tags:** `devops`, `ci`, `build`

Created new GitHub Actions workflow job to build Android application. Includes dependency installation, build configuration, and artifact generation for CI/CD pipeline.

---

## 01428 — feat(macos): move camera setting to General
**SHA:** 3729d269d0 · **Date:** 2025-12-14 03:32
**Files changed:** apps/macos/Sources/Settings/GeneralSettingsView.swift
**Tags:** `core-feature`, `ui`, `ux`

Moved camera permission and configuration settings from Privacy section to General settings tab. Improves discoverability and aligns with macOS user expectations for general application preferences.

---

## 01429 — fix(macos): hide session store path in remote mode
**SHA:** efc7181aa0 · **Date:** 2025-12-14 03:38
**Files changed:** apps/macos/Sources/Settings/SettingsView.swift
**Tags:** `bugfix`, `ui`

Fixed macOS Settings view to hide local session store path when running in remote mode. Prevents confusion and improves UI clarity when application operates as remote client.

---

## 01430 — test(ios): cover bridge client + more views
**SHA:** d0134722af · **Date:** 2025-12-14 03:37
**Files changed:** apps/ios/Tests/BridgeClientTests.swift, apps/ios/Tests/ViewTests.swift
**Tags:** `testing`

Expanded iOS test coverage to include bridge client integration tests and additional view component tests. Validates client-server communication and proper view behavior across various states.

---

## 01431 — ci: raise iOS coverage gate to 50%
**SHA:** 65a0de8979 · **Date:** 2025-12-14 03:37
**Files changed:** .github/workflows/ci.yml
**Tags:** `testing`, `devops`, `ci`

Increased minimum iOS code coverage threshold from 40% to 50%. Enforces higher test coverage standards as codebase matures and test suite expands.

---

## 01432 — ci: pick iOS simulator via simctl json
**SHA:** c7022cc139 · **Date:** 2025-12-14 03:39
**Files changed:** .github/workflows/ios-tests.yml
**Tags:** `devops`, `ci`, `build`

Improved iOS simulator selection in CI pipeline by parsing simctl JSON output instead of using fragile string matching. Ensures reliable simulator discovery across different Xcode versions.

---

## 01433 — ui(macos): lower onboarding welcome content
**SHA:** 67e0739bec · **Date:** 2025-12-14 03:45
**Files changed:** apps/macos/Sources/Onboarding/WelcomeView.swift
**Tags:** `ui`, `ux`

Adjusted vertical positioning of onboarding welcome screen content. Improved visual balance and spacing to accommodate various screen sizes and resolutions.

---

## 01434 — ci: fix python heredoc indentation
**SHA:** f427bec31c · **Date:** 2025-12-14 03:45
**Files changed:** .github/workflows/ci.yml
**Tags:** `devops`, `ci`, `bugfix`

Fixed YAML indentation in CI workflow Python script blocks. Corrected heredoc formatting to ensure proper script execution in GitHub Actions environment.

---

## 01435 — ui(macos): skip local onboarding steps in remote mode
**SHA:** 3a08e6df9d · **Date:** 2025-12-14 03:49
**Files changed:** apps/macos/Sources/Onboarding/OnboardingFlow.swift
**Tags:** `ui`, `ux`, `core-feature`

Modified macOS onboarding flow to skip local-only setup steps when application runs in remote mode. Streamlines onboarding experience for remote client deployments.

---

## 01436 — style(swift): fix lint and formatting warnings
**SHA:** dde9fddae4 · **Date:** 2025-12-14 03:48
**Files changed:** apps/ios/Sources/**/*.swift, apps/macos/Sources/**/*.swift
**Tags:** `cleanup`, `style`

Applied Swift style formatter to resolve lint warnings and ensure code formatting consistency across iOS and macOS targets. Maintains code quality standards without logic changes.

---

## 01437 — ci: fix yaml indentation for python blocks
**SHA:** 3885a2a20f · **Date:** 2025-12-14 03:51
**Files changed:** .github/workflows/ci.yml
**Tags:** `devops`, `ci`, `bugfix`

Fixed YAML indentation issues in CI workflow affecting Python script block parsing. Ensures proper execution of embedded Python scripts in workflow jobs.

---

## 01438 — ui(macos): make master discovery selectable
**SHA:** 8649de6199 · **Date:** 2025-12-14 03:53
**Files changed:** apps/macos/Sources/Onboarding/MasterDiscoveryView.swift
**Tags:** `ui`, `ux`, `core-feature`

Enhanced macOS master discovery UI to allow user selection from discovered masters. Provides interactive selection interface instead of automatic connection to first discovered master.

---

## 01439 — ui(macos): fix security notice wrapping
**SHA:** e9e2e5026c · **Date:** 2025-12-14 03:57
**Files changed:** apps/macos/Sources/Onboarding/SecurityNoticeView.swift
**Tags:** `ui`, `ux`, `bugfix`

Fixed text wrapping issues in macOS security notice display. Ensures notice message displays correctly on various screen sizes without truncation.

---

## 01440 — test(web): make heartbeat call selection deterministic
**SHA:** 38a773f245 · **Date:** 2025-12-14 03:59
**Files changed:** apps/web/tests/heartbeat.test.ts
**Tags:** `testing`, `bugfix`

Fixed web heartbeat test to use deterministic call selection instead of relying on execution order. Improves test reliability by removing timing-dependent assertions.

---

## 01441 — docs: add onboarding spec
**SHA:** 98399b85e3 · **Date:** 2025-12-14 03:59
**Files changed:** docs/onboarding-spec.md
**Tags:** `documentation`

Created comprehensive onboarding specification document detailing user flow, step sequencing, and configuration options across platforms. Serves as reference for onboarding implementation and UX design.

---

## 01442 — ui(macos): remove duplicate canvas toggle
**SHA:** f6f69b408f · **Date:** 2025-12-14 04:00
**Files changed:** apps/macos/Sources/Canvas/CanvasToggle.swift
**Tags:** `ui`, `bugfix`, `cleanup`

Removed duplicate canvas toggle control that appeared in multiple locations. Consolidates canvas visibility toggle to single control point for improved UI clarity.

---

## 01443 — style: satisfy formatters
**SHA:** 357a1a982b · **Date:** 2025-12-14 04:02
**Files changed:** Various source files
**Tags:** `cleanup`, `style`

Applied project code formatters across multiple files to ensure consistent code style. No functional changes, purely formatting and whitespace adjustments.

---

## 01444 — ui(macos): always enable deep links
**SHA:** 951993db17 · **Date:** 2025-12-14 04:06
**Files changed:** apps/macos/Sources/DeepLinking/DeepLinkHandler.swift
**Tags:** `ui`, `core-feature`

Enabled deep link support in macOS application regardless of user preferences. Deep links always processed and respected for better application integration and workflow automation.

---

## 01445 — refactor(macos): simplify bridge frame handling
**SHA:** 7c91ce2fa7 · **Date:** 2025-12-14 03:56
**Files changed:** apps/macos/Sources/Bridge/BridgeViewController.swift
**Tags:** `refactor`, `core-feature`

Refactored macOS bridge view frame management to reduce complexity. Simplified frame calculation and update logic while maintaining proper layout behavior.

---

## 01446 — chore(macos): silence onboarding type length lint
**SHA:** 97fe3972c8 · **Date:** 2025-12-14 03:56
**Files changed:** apps/macos/Sources/Onboarding/OnboardingFlow.swift
**Tags:** `cleanup`, `build`

Added lint suppression annotation for onboarding type length warnings. Type definition is complex but necessary; suppression prevents noise in lint output.

---

## 01447 — ci: create iOS simulator when missing
**SHA:** 265a3dff27 · **Date:** 2025-12-14 04:09
**Files changed:** .github/workflows/ios-tests.yml
**Tags:** `devops`, `ci`, `build`

Enhanced iOS CI workflow to automatically create iOS simulator if not already available. Ensures simulator environment exists before attempting to run tests.

---

## 01448 — ci: fix iOS simulator selection indentation
**SHA:** 4d4bcaab1e · **Date:** 2025-12-14 04:13
**Files changed:** .github/workflows/ios-tests.yml
**Tags:** `devops`, `ci`, `bugfix`

Corrected YAML indentation in iOS simulator selection logic within CI workflow. Fixes script formatting errors that prevented proper simulator detection.

---

## 01449 — ui(macos): skip whatsapp onboarding in remote mode
**SHA:** a47d3e3e35 · **Date:** 2025-12-14 04:20
**Files changed:** apps/macos/Sources/Onboarding/OnboardingFlow.swift
**Tags:** `ui`, `ux`, `core-feature`

Modified macOS onboarding flow to skip WhatsApp integration step when running in remote mode. Prevents presentation of platform-specific setup steps not applicable to remote clients.

---

## 01450 — feat(macos): onboard Claude OAuth + identity
**SHA:** a097c848bb · **Date:** 2025-12-14 04:21
**Files changed:** apps/macos/Sources/Onboarding/AuthenticationView.swift, apps/macos/Sources/Identity/IdentityManager.swift
**Tags:** `core-feature`, `authentication`, `api`

Implemented Claude OAuth authentication and identity management in macOS onboarding flow. Allows users to authenticate with Claude service and establishes persistent identity through OAuth token handling.

---
