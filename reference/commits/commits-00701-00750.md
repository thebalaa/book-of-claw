# Commit Reference: 00701–00750

A plain factual summary of every commit in the OpenClaw repository, from commit 701 through commit 750.

---

## 00701 — ui: tidy tables, links, and hide redundant voice wake forwarder
**SHA:** 6f8fb561c6 · **Date:** 2025-12-07 23:26
**Files changed:** apps/macos/Sources/Clawdis/SessionsSettings.swift, apps/macos/Sources/Clawdis/ToolsSettings.swift, apps/macos/Sources/Clawdis/Resources/WebChat/webchat.bundle.js
**Tags:** `ux`

Adjusted table column widths in the Sessions settings view, making the Name column wider and Tokens column narrower. Hid the SessionKindBadge for direct sessions to reduce visual clutter. Updated bundled web chat JavaScript dependencies.

---

## 00702 — ui: place health row under remote picker and improve timeout message
**SHA:** 9d751e0c72 · **Date:** 2025-12-07 23:34
**Files changed:** apps/macos/Sources/Clawdis/GeneralSettings.swift, apps/macos/Sources/Clawdis/HealthStore.swift
**Tags:** `ux`

Moved the health status row to appear directly under the remote connection picker in General settings for better context. Enhanced timeout error messages to display elapsed time in milliseconds when web connect times out.

---

## 00703 — copy: rename recognition language label
**SHA:** 5d321c4dac · **Date:** 2025-12-07 23:35
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeSettings.swift
**Tags:** `ux`

Shortened the voice wake settings label from "Recognition language" to "Language" to save horizontal space in the UI.

---

## 00704 — fix: stop voice wake tester after short post-trigger silence
**SHA:** 629f2e0043 · **Date:** 2025-12-07 23:43
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeTester.swift
**Tags:** `bugfix`

Changed the voice wake tester to stop listening after a shorter silence window (0.8s) following trigger detection, with a hard stop at 3 seconds instead of 10. Reduced polling interval from 250ms to 200ms for more responsive testing.

---

## 00705 — copy: shorten tailscale tip
**SHA:** a1d499ed64 · **Date:** 2025-12-08 00:14
**Files changed:** apps/macos/Sources/Clawdis/GeneralSettings.swift
**Tags:** `ux`

Condensed the Tailscale tip message from "use Tailscale for stable remote access; we recommend enabling it when you pick a remote Clawdis" to "use Tailscale so your remote Clawdis stays reachable."

---

## 00706 — ui: move Clawdis active toggle to top
**SHA:** dc291fa811 · **Date:** 2025-12-08 00:16
**Files changed:** apps/macos/Sources/Clawdis/GeneralSettings.swift
**Tags:** `ux`

Repositioned the Clawdis Active toggle and connection section to appear at the top of General settings, moving them above the onboarding message for better prominence.

---

## 00707 — ui: remove duplicate health row in General
**SHA:** 2f50b57e76 · **Date:** 2025-12-08 00:17
**Files changed:** apps/macos/Sources/Clawdis/GeneralSettings.swift
**Tags:** `bugfix`

Removed a duplicate health status row that was appearing in the General settings view after the earlier reorganization.

---

## 00708 — feat(macos): add Sparkle updates and release docs
**SHA:** ddbe680a58 · **Date:** 2025-12-08 00:18
**Files changed:** appcast.xml, apps/macos/Package.swift, apps/macos/Package.resolved, apps/macos/Sources/Clawdis/ClawdisApp.swift, RELEASE.md
**Tags:** `core-feature`, `documentation`, `dependency`

Integrated the Sparkle framework (version 2.8.1) for automatic software updates on macOS. Added appcast.xml feed configuration and RELEASE.md documentation describing the release process, signing requirements, and appcast feed structure.

---

## 00709 — copy: capitalize send heartbeats menu label
**SHA:** d16e5090a6 · **Date:** 2025-12-08 00:40
**Files changed:** apps/macos/Sources/Clawdis/MenuBar.swift
**Tags:** `ux`

Changed menu bar label from "Send heartbeats" to "Send Heartbeats" for consistent capitalization with other menu items.

---

## 00710 — copy: rename menu toggle to Remote Clawdis Active when remote
**SHA:** 4b5c43f080 · **Date:** 2025-12-08 00:41
**Files changed:** apps/macos/Sources/Clawdis/MenuBar.swift
**Tags:** `ux`

Made the menu bar toggle label context-aware, displaying "Remote Clawdis Active" when in remote mode and "Clawdis Active" when in local mode.

---

## 00711 — health: surface ssh output when probe fails
**SHA:** 42012389c4 · **Date:** 2025-12-08 00:52
**Files changed:** apps/macos/Sources/Clawdis/HealthStore.swift
**Tags:** `ux`

Enhanced health check error reporting to capture and log SSH command output when remote health probes fail. Added OSLog logging to surface stderr output for debugging connection issues.

---

## 00712 — ui: drop default sound picker; use cli per-notification sound
**SHA:** 79b76fb5f4 · **Date:** 2025-12-08 00:56
**Files changed:** apps/macos/Sources/Clawdis/AppState.swift, apps/macos/Sources/Clawdis/GeneralSettings.swift, apps/macos/Sources/Clawdis/SoundSettings.swift
**Tags:** `refactor`

Removed the default sound picker from app state and UI settings. Sound selection is now handled per-notification through CLI configuration rather than a global default.

---

## 00713 — webchat: make remote mode load history and send via rpc
**SHA:** 6415ae79be · **Date:** 2025-12-08 01:27
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `core-feature`

Changed webchat in remote mode to load session history from the remote server and send messages via RPC instead of spawning local CLI processes. Removed the local process execution code in favor of direct RPC calls.

---

## 00714 — VoiceWake: capture utterance and add prefix
**SHA:** a6e0ec38e7 · **Date:** 2025-12-08 01:35
**Files changed:** apps/macos/Sources/Clawdis/AppState.swift, apps/macos/Sources/Clawdis/VoiceWakeForwarder.swift
**Tags:** `core-feature`

Added prefixing functionality to voice wake transcripts, prepending remote machine name when forwarding utterances. Introduced stopVoiceEars() method and made triggerVoiceEars() support optional TTL for indefinite activation.

---

## 00715 — webchat: load remote history from tau fallback and send to session
**SHA:** 68d19d4717 · **Date:** 2025-12-08 01:36
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `core-feature`

Added fallback logic to load session history from ~/.tau/agent/sessions/clawdis/ when the primary ~/.clawdis/sessions/ path doesn't exist. Supports both remote file reading and local file paths. Corrected the session parameter to be passed to the deliver field.

---

## 00716 — chore(ci): fix lint and swiftformat failures
**SHA:** f65702a8a8 · **Date:** 2025-12-08 01:48
**Files changed:** apps/macos/Sources/Clawdis/AppState.swift, apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `linting`

Applied Swift linting and formatting fixes to resolve CI failures. No functional changes, only code style adjustments.

---

## 00717 — webchat: fetch remote sessions via CLI and log missing history
**SHA:** 2112fa919a · **Date:** 2025-12-08 01:55
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `ux`

Enhanced remote session handling to fetch session IDs via CLI and log warnings when history files cannot be found. Improved error visibility for missing session data on remote servers.

---

## 00718 — build: silence grammy type errors for mac packaging
**SHA:** 22ed7ea3f2 · **Date:** 2025-12-08 11:04
**Files changed:** apps/macos/bundle-web-chat.sh
**Tags:** `bugfix`

Added TypeScript compiler flag to ignore grammy library type errors during macOS app packaging, preventing build failures from third-party type definitions.

---

## 00719 — docs: outline web chat move to relay server
**SHA:** dc69d20ec9 · **Date:** 2025-12-08 11:25
**Files changed:** WEBCHAT.md
**Tags:** `documentation`

Documented the architectural change to move webchat serving from macOS app to the relay server. Outlined the plan to run a local loopback server and tunnel through it from the Mac app.

---

## 00720 — webchat: move serving to relay loopback and tunnel from mac app
**SHA:** dc22661744 · **Date:** 2025-12-08 11:54
**Files changed:** apps/macos/Sources/Clawdis/Utilities.swift, apps/macos/Sources/Clawdis/WebChatWindow.swift, packages/clawdis-ipc/src/web-chat-http.ts, packages/clawdis/src/commands/webchat.ts
**Tags:** `core-feature`, `refactor`

Implemented the webchat architecture change by moving the server to run on relay's loopback interface. The macOS app now tunnels to this server via SSH or direct connection. Added web-chat-http.ts module and modified CommandResolver to expose connection settings.

---

## 00721 — webchat: surface bootstrap errors in UI
**SHA:** be87cdddeb · **Date:** 2025-12-08 12:17
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `ux`

Enhanced error handling to display bootstrap failures (server connection errors, invalid responses) in the webchat UI rather than silently failing.

---

## 00722 — webchat: send via http rpc endpoint and show errors
**SHA:** bce84376d3 · **Date:** 2025-12-08 12:23
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift, packages/clawdis-ipc/src/web-chat-http.ts, packages/clawdis/src/commands/webchat.ts
**Tags:** `core-feature`

Changed message sending to use HTTP RPC endpoint instead of CLI spawning. Added /webchat/send POST endpoint and error display for failed sends in the UI.

---

## 00723 — refactor(cli): drop tmux helpers and update help copy
**SHA:** 17fa2f4053 · **Date:** 2025-12-08 12:43
**Files changed:** packages/clawdis/src/commands/develop.ts, packages/clawdis/src/index.ts
**Tags:** `refactor`, `documentation`

Removed tmux-related helper commands and references from the CLI. Updated help text to remove tmux mentions and streamline command descriptions.

---

## 00724 — Remote web chat tunnel and onboarding polish
**SHA:** 92457f7fab · **Date:** 2025-12-08 12:50
**Files changed:** apps/macos/Sources/Clawdis/GeneralSettings.swift, apps/macos/Sources/Clawdis/WebChatWindow.swift, WEBCHAT.md
**Tags:** `core-feature`, `ux`, `documentation`

Implemented full remote webchat tunneling with improved connection handling. Polished onboarding flow and updated documentation to reflect the new tunnel-based architecture.

---

## 00725 — SSH remote uses clawdis only
**SHA:** a6ff62c79c · **Date:** 2025-12-08 13:20
**Files changed:** apps/macos/Sources/Clawdis/Utilities.swift, REMOTE.md
**Tags:** `refactor`, `documentation`

Simplified remote SSH commands to exclusively use the clawdis CLI helper rather than mixing multiple command types. Updated remote setup documentation to reflect this standardization.

---

## 00726 — Split clawdis node vs mac helper commands
**SHA:** d833de793d · **Date:** 2025-12-08 13:26
**Files changed:** apps/macos/Sources/Clawdis/Utilities.swift, apps/macos/Sources/Clawdis/VoiceWakeForwarder.swift, REMOTE.md
**Tags:** `refactor`, `documentation`

Separated command resolution logic for Node.js clawdis CLI and macOS clawdis-mac helper binary. Introduced distinct clawdisMacCommand() and clawdisCommand() methods for clarity.

---

## 00727 — Webchat: auto-start server and simplify config
**SHA:** 17a6d716ad · **Date:** 2025-12-08 13:12
**Files changed:** packages/clawdis/src/commands/webchat.ts, packages/clawdis/src/index.ts
**Tags:** `core-feature`

Modified webchat command to automatically start the HTTP server when the command runs, eliminating need for separate server startup. Simplified configuration by removing manual server management.

---

## 00728 — macOS webchat: use relay HTTP transport directly
**SHA:** 081460e59d · **Date:** 2025-12-08 13:12
**Files changed:** apps/macos/Sources/Clawdis/WebChatWindow.swift
**Tags:** `core-feature`, `refactor`

Changed macOS webchat implementation to communicate directly with the relay HTTP transport rather than proxying through additional layers.

---

## 00729 — feat(macos): add voice wake mic picker
**SHA:** cd30a99fae · **Date:** 2025-12-08 15:05
**Files changed:** apps/macos/Sources/Clawdis/MenuBar.swift, apps/macos/Sources/Clawdis/VoiceWakeSettings.swift
**Tags:** `core-feature`, `ux`

Added microphone selection menu to voice wake settings and menu bar. Displays available audio input devices with checkmarks indicating the selected microphone, including a default option for system default mic.

---

## 00730 — Webchat: resolve static root in packaged app
**SHA:** ff3337feed · **Date:** 2025-12-08 14:07
**Files changed:** packages/clawdis/src/commands/webchat.ts
**Tags:** `bugfix`

Fixed static file serving path resolution to work correctly when running from a packaged macOS app bundle instead of only working in development.

---

## 00731 — Webchat: run agent in-process for RPC
**SHA:** 52453eaeff · **Date:** 2025-12-08 14:14
**Files changed:** packages/clawdis-ipc/src/web-chat-http.ts, packages/clawdis/src/agent/index.ts, packages/clawdis/src/commands/webchat.ts
**Tags:** `core-feature`, `refactor`

Changed webchat agent execution from spawning subprocess to running in-process via imported runAgent function. Enables direct RPC calls and eliminates process overhead.

---

## 00732 — Docs: webchat now served in-process, no CLI spawn
**SHA:** a40e56bcb7 · **Date:** 2025-12-08 14:15
**Files changed:** WEBCHAT.md
**Tags:** `documentation`

Updated webchat documentation to reflect that the agent now runs in-process rather than spawning CLI subprocesses.

---

## 00733 — status: read token usage from pi session logs
**SHA:** ccc6bf05e8 · **Date:** 2025-12-08 14:46
**Files changed:** packages/clawdis/src/status/index.ts
**Tags:** `core-feature`

Enhanced status command to parse and display token usage statistics from Pi (tau agent) session log files.

---

## 00734 — Webchat: inline attachments to agent RPC and fix status compile
**SHA:** fedb15d5d0 · **Date:** 2025-12-08 14:46
**Files changed:** packages/clawdis-ipc/src/web-chat-http.ts, packages/clawdis/src/agent/index.ts, packages/clawdis/src/status/index.ts
**Tags:** `core-feature`, `bugfix`

Added support for inlining file attachments in webchat agent RPC calls. Fixed TypeScript compilation errors in the status command.

---

## 00735 — Webchat: update bundled assets after attachment support
**SHA:** 968c5dc4aa · **Date:** 2025-12-08 14:48
**Files changed:** apps/macos/Sources/Clawdis/Resources/WebChat/webchat.bundle.js, apps/macos/Sources/Clawdis/Resources/WebChat/webchat.bundle.js.map
**Tags:** `core-feature`

Rebuilt and updated the bundled webchat JavaScript assets to include the attachment handling functionality from previous commit.

---

## 00736 — Webchat: cap/ persist attachments and strip data URLs
**SHA:** 0e4379f075 · **Date:** 2025-12-08 14:59
**Files changed:** packages/clawdis-ipc/src/web-chat-http.ts, packages/clawdis/src/agent/index.ts
**Tags:** `core-feature`

Implemented attachment capping (size/count limits), persistence to disk, and stripping of data URLs from session logs. Prevents large embedded data from bloating session files.

---

## 00737 — feat(cli): unify relay providers and heartbeat flag
**SHA:** 90a0bb5acb · **Date:** 2025-12-08 15:22
**Files changed:** packages/clawdis/src/commands/relay.ts, packages/clawdis/src/index.ts, packages/clawdis/src/relay/index.ts
**Tags:** `core-feature`, `refactor`

Unified relay provider handling across different transports (Telegram, WhatsApp) and added --heartbeat flag to enable periodic heartbeat messages for keeping connections alive.

---

## 00738 — feat: add voice wake overlay
**SHA:** 764761cfa5 · **Date:** 2025-12-08 16:29
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift, apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift, apps/macos/Sources/Clawdis/ClawdisApp.swift, apps/macos/Clawdis.xcodeproj/project.pbxproj
**Tags:** `core-feature`

Introduced VoiceWakeOverlay, a borderless floating panel near the menu bar that displays voice wake transcripts. Shows partial and final transcripts with edit capability and auto-send timing.

---

## 00739 — feat: refine voice wake overlay animations
**SHA:** 8d2de036d5 · **Date:** 2025-12-08 16:32
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift
**Tags:** `ux`

Refined the overlay animations for smoother appearance, text updates, and dismissal. Improved visual polish for the voice wake transcript display.

---

## 00740 — feat: add adaptive voice wake delays
**SHA:** 414889e03b · **Date:** 2025-12-08 16:33
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift, apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift
**Tags:** `core-feature`

Implemented adaptive delays for voice wake overlay that adjust based on transcript length. Shorter transcripts wait less time before auto-sending, longer ones wait longer for potential edits.

---

## 00741 — fix: trim overlay transcript to post-trigger
**SHA:** 563701fed8 · **Date:** 2025-12-08 16:35
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift
**Tags:** `bugfix`

Added logic to trim the voice wake transcript to only include words spoken after the trigger phrase, removing the trigger phrase itself from what gets displayed and forwarded.

---

## 00742 — test: cover trigger trimming for voice wake
**SHA:** 912a7a1781 · **Date:** 2025-12-08 16:36
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift, apps/macos/Tests/ClawdisIPCTests/VoiceWakeRuntimeTests.swift
**Tags:** `testing`

Added unit tests for the trigger phrase trimming logic. Tests verify that post-trigger text is correctly extracted and that original text is preserved when no trigger is found.

---

## 00743 — fix: delay logic waits for post-trigger content
**SHA:** a5fbfa3748 · **Date:** 2025-12-08 16:38
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift, apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift
**Tags:** `bugfix`

Fixed adaptive delay calculation to base timing on the length of post-trigger content rather than the full transcript including the trigger phrase.

---

## 00744 — feat: tint partial transcripts and stabilize delays
**SHA:** 7a0830de15 · **Date:** 2025-12-08 16:41
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift
**Tags:** `ux`

Applied visual tinting to partial (in-progress) transcripts to distinguish them from final transcripts. Stabilized delay timing calculations for more consistent auto-send behavior.

---

## 00745 — feat: show partial transcripts with subdued tint
**SHA:** 367526f750 · **Date:** 2025-12-08 16:44
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift
**Tags:** `ux`

Enhanced partial transcript display with subdued color tinting (lower opacity) to clearly indicate when recognition is still in progress versus finalized.

---

## 00746 — fix: animate overlay resizing on updates
**SHA:** 1c5170b759 · **Date:** 2025-12-08 16:44
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift
**Tags:** `ux`, `bugfix`

Added smooth animations when the overlay panel resizes due to transcript text changes, preventing jarring visual jumps as text length varies.

---

## 00747 — chore: remove overlay shadow/border
**SHA:** d733d246f0 · **Date:** 2025-12-08 16:45
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift
**Tags:** `ux`

Removed shadow and border effects from the voice wake overlay for a cleaner, more minimal visual appearance.

---

## 00748 — feat: add outcome-based dismiss animations
**SHA:** 81db44f584 · **Date:** 2025-12-08 16:49
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeOverlay.swift, apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift
**Tags:** `ux`

Implemented different dismiss animations based on outcome (sent, cancelled, error). Provides visual feedback about what happened to the voice wake command.

---

## 00749 — fix(mac): surface health errors instead of pending
**SHA:** de70d82cea · **Date:** 2025-12-08 16:50
**Files changed:** apps/macos/Sources/Clawdis/HealthStore.swift
**Tags:** `bugfix`

Fixed health status display to show actual error messages instead of leaving status in pending state when health checks fail.

---

## 00750 — fix: finalize only after full 1s silence
**SHA:** d9d0be0256 · **Date:** 2025-12-08 16:52
**Files changed:** apps/macos/Sources/Clawdis/VoiceWakeRuntime.swift
**Tags:** `bugfix`

Changed voice wake finalization to require a full 1 second of silence before considering the utterance complete, preventing premature cutoff of longer commands.

---
