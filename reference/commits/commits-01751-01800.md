# Commit Reference: 01751–01800

A plain factual summary of every commit in the OpenClaw repository, from commit 1751 through commit 1800.

---

## 01751 — feat(macos): run bundled gateway via launchd
**SHA:** a4d4a30a6b · **Date:** 2025-12-19 19:20
**Files changed:** Constants.swift, DebugSettings.swift, GatewayEnvironment.swift, GatewayLaunchAgentManager.swift
**Tags:** `core-feature`, `devops`

Adds support for running the bundled bun-compiled gateway binary via a launchd LaunchAgent on macOS. The implementation detects the bundled gateway executable and prefers it over the project-based gateway when available, installing a per-user LaunchAgent labeled `com.steipete.clawdis.gateway`.

---

## 01752 — docs: update bundled gateway flow
**SHA:** 0b18f1b948 · **Date:** 2025-12-19 19:20
**Files changed:** gateway.md, child-process.md, onboarding.md
**Tags:** `documentation`

Updates documentation to reflect the shift to a launchd-based LaunchAgent approach for running the bundled gateway. Notes that the current implementation prefers bundled bun-compiled gateways over direct child process execution.

---

## 01753 — chore: ignore bun build artifacts
**SHA:** 0b16b4481a · **Date:** 2025-12-19 19:21
**Files changed:** .gitignore
**Tags:** `cleanup`, `build`

Adds gitignore entries for bun build artifacts to prevent compiled binaries and build outputs from being tracked in version control.

---

## 01754 — fix(macos): sign bun gateway with jit entitlements
**SHA:** 2ef2136c2c · **Date:** 2025-12-19 19:24
**Files changed:** codesign-mac-app.sh
**Tags:** `bugfix`, `devops`

Updates the macOS code signing script to include Just-In-Time (JIT) compilation entitlements for the bundled bun gateway binary, allowing the gateway to execute compiled bytecode.

---

## 01755 — fix: restore mac app build
**SHA:** 56cb415509 · **Date:** 2025-12-19 22:08
**Files changed:** build configuration files
**Tags:** `bugfix`, `build`

Fixes issues in the macOS app build pipeline to restore successful compilation of the bundled gateway and application bundles.

---

## 01756 — fix: handle screen record microphone output
**SHA:** 96be450cbb · **Date:** 2025-12-19 22:09
**Files changed:** screen recording handlers
**Tags:** `bugfix`, `audio`

Resolves handling of audio output during screen recording operations to properly capture microphone input without conflicts.

---

## 01757 — perf(macos): compile embedded gateway with bytecode
**SHA:** 836f645621 · **Date:** 2025-12-19 22:11
**Files changed:** gateway build configuration
**Tags:** `performance`, `build`

Optimizes gateway startup performance by precompiling the embedded gateway to bytecode format, reducing JIT compilation overhead during runtime.

---

## 01758 — docs(mac): add bun gateway packaging notes
**SHA:** d46823333d · **Date:** 2025-12-19 22:13
**Files changed:** mac/packaging.md
**Tags:** `documentation`, `build`

Adds documentation explaining how the bun-compiled gateway is packaged within the macOS application bundle and the build process involved.

---

## 01759 — style(macos): add dmg background
**SHA:** 0ad49c25aa · **Date:** 2025-12-19 22:22
**Files changed:** dmg-background.png, build-dmg.sh
**Tags:** `ui`, `build`

Introduces a custom background image for the macOS DMG installer to improve visual presentation during application installation.

---

## 01760 — build(macos): add dmg+zip packaging
**SHA:** beb6e25ef0 · **Date:** 2025-12-19 22:22
**Files changed:** build scripts, packaging configuration
**Tags:** `devops`, `build`

Adds build support for creating both DMG and ZIP packaged distributions of the macOS application, enabling users to install via either format.

---

## 01761 — docs(mac): document dmg packaging
**SHA:** 19f518317 · **Date:** 2025-12-19 22:22
**Files changed:** mac/dmg-packaging.md
**Tags:** `documentation`, `build`

Documents the DMG packaging process and configuration, including background image sizing and installer layout requirements.

---

## 01762 — fix: align DMG background and icon layout
**SHA:** 5472589ddd · **Date:** 2025-12-19 22:38
**Files changed:** dmg-background.png, build-dmg.sh configuration
**Tags:** `bugfix`, `ui`

Adjusts the DMG installer layout to properly align the background image and application icon positioning for consistent visual appearance.

---

## 01763 — docs: note DMG background sizing
**SHA:** 9248919b05 · **Date:** 2025-12-19 22:39
**Files changed:** mac/dmg-packaging.md
**Tags:** `documentation`

Adds sizing guidelines for DMG background images to ensure proper scaling and layout across different display resolutions.

---

## 01764 — style: refine DMG arrow
**SHA:** eb076165d2 · **Date:** 2025-12-19 22:44
**Files changed:** dmg-background.png
**Tags:** `ui`

Refines the visual appearance of the arrow element in the DMG background for improved clarity and aesthetic consistency.

---

## 01765 — style: lighten DMG background for label contrast
**SHA:** bcced90f11 · **Date:** 2025-12-19 22:51
**Files changed:** dmg-background.png
**Tags:** `ui`, `accessibility`

Lightens the DMG background color to improve contrast and readability of text labels during the installation process.

---

## 01766 — refactor: unify gateway discovery on bridge
**SHA:** bc2a66da32 · **Date:** 2025-12-19 23:12
**Files changed:** gateway bridge implementation
**Tags:** `refactor`, `core-feature`

Consolidates gateway discovery logic onto a single bridge implementation, eliminating duplicate discovery code across multiple components.

---

## 01767 — fix: decode bonjour escaped utf8
**SHA:** 0ac7a93c28 · **Date:** 2025-12-19 23:21
**Files changed:** bonjour discovery handler
**Tags:** `bugfix`, `networking`

Fixes proper decoding of UTF-8 escaped characters in Bonjour service discovery results to correctly handle internationalized service names.

---

## 01768 — feat(browser): add MCP tool dispatch
**SHA:** fa54950d2e · **Date:** 2025-12-19 23:57
**Files changed:** browser/mcp-dispatcher.ts, browser/tools.ts
**Tags:** `core-feature`, `api`

Implements Model Context Protocol (MCP) tool dispatch mechanism in the browser module, allowing the browser to invoke Claude tools through a standardized protocol.

---

## 01769 — test(browser): cover MCP tool routes
**SHA:** d54ecc3961 · **Date:** 2025-12-19 23:57
**Files changed:** browser/test/mcp-dispatcher.test.ts
**Tags:** `testing`

Adds comprehensive unit tests covering MCP tool dispatch routes and various tool invocation scenarios in the browser module.

---

## 01770 — docs(browser): add MCP tool spec
**SHA:** 46b9006de2 · **Date:** 2025-12-19 23:57
**Files changed:** docs/browser-mcp-tools.md
**Tags:** `documentation`, `api`

Documents the MCP tool specification for browser-based tool dispatch, including protocol details and implementation guidelines.

---

## 01771 — fix: remove WhatsApp batching delay
**SHA:** afa4a234f9 · **Date:** 2025-12-20 01:36
**Files changed:** whatsapp-provider.ts
**Tags:** `bugfix`, `performance`

Removes an unnecessary delay in WhatsApp message batching that was causing latency in message delivery. Messages now send immediately without artificial delays.

---

## 01772 — fix: harden device model decoding
**SHA:** 1b38ee8b46 · **Date:** 2025-12-20 01:48
**Files changed:** device-model-decoder.ts
**Tags:** `bugfix`, `error-handling`

Improves robustness of device model decoding to handle edge cases and invalid input more gracefully, preventing crashes from malformed device data.

---

## 01773 — fix: tighten iOS main-actor handling
**SHA:** b2e11c504b · **Date:** 2025-12-20 01:48
**Files changed:** ios/main-thread-manager.swift
**Tags:** `bugfix`, `core-feature`

Tightens iOS main thread (main-actor) handling to ensure all UI operations execute on the correct thread, preventing race conditions and rendering issues.

---

## 01774 — style: polish logging and lint hints
**SHA:** d67bec0740 · **Date:** 2025-12-20 01:48
**Files changed:** logging utilities, linting configuration
**Tags:** `cleanup`, `logging`

Improves code logging messages and adds hints for linting tools to catch common issues early during development.

---

## 01775 — feat(browser): add native action commands
**SHA:** a526d3c1f2 · **Date:** 2025-12-20 00:53
**Files changed:** browser/native-actions.ts, browser/action-registry.ts
**Tags:** `core-feature`

Implements native action command execution in the browser module, allowing the browser to dispatch platform-native commands alongside MCP tools.

---

## 01776 — refactor(mac): remove clawdis-mac browser cli
**SHA:** 80a87e5f9e · **Date:** 2025-12-20 01:06
**Files changed:** apps/mac/browser-cli.swift
**Tags:** `refactor`, `cleanup`

Removes the deprecated clawdis-mac browser CLI module in favor of the unified gateway-based browser implementation.

---

## 01777 — feat(macos): add unconfigured gateway mode
**SHA:** 4e74ba996d · **Date:** 2025-12-20 02:20
**Files changed:** GatewayEnvironment.swift, onboarding flow
**Tags:** `core-feature`, `ux`

Adds support for running the macOS application with an unconfigured gateway, allowing users to interact with the app before setting up a full gateway connection.

---

## 01778 — fix(mac): use gateway main session for WebChat
**SHA:** 1a51257b71 · **Date:** 2025-12-20 01:27
**Files changed:** WebChat.swift, gateway-session.swift
**Tags:** `bugfix`

Fixes WebChat component to use the gateway's main session instead of creating separate connections, ensuring consistent state and reducing resource usage.

---

## 01779 — fix(browser): restore tsc types
**SHA:** 0e94c6b025 · **Date:** 2025-12-20 01:27
**Files changed:** tsconfig.json, type-definitions.ts
**Tags:** `bugfix`, `build`

Restores TypeScript compiler type checking that was inadvertently disabled, re-enabling compile-time type safety for the browser module.

---

## 01780 — refactor(browser): trim observe endpoints
**SHA:** 479720c169 · **Date:** 2025-12-20 02:07
**Files changed:** browser/observe-endpoints.ts
**Tags:** `refactor`, `api`

Removes unused observer endpoints from the browser API surface to simplify the interface and reduce maintenance burden.

---

## 01781 — refactor(cli): unify on clawdis CLI + node permissions
**SHA:** 849446ae17 · **Date:** 2025-12-20 02:08
**Files changed:** cli/index.ts, permission-handler.ts
**Tags:** `refactor`, `core-feature`

Unifies command-line interface on the clawdis CLI entry point and improves Node.js permission handling for better security and portability.

---

## 01782 — refactor(browser): prune browser automation surface
**SHA:** 6fc30962d6 · **Date:** 2025-12-20 02:53
**Files changed:** browser/automation-api.ts
**Tags:** `refactor`, `cleanup`

Removes deprecated browser automation endpoints that are no longer used, streamlining the API surface and improving maintainability.

---

## 01783 — docs(browser): update browser tool surface
**SHA:** b1a85d89d2 · **Date:** 2025-12-20 02:53
**Files changed:** docs/browser-tools.md
**Tags:** `documentation`, `api`

Updates documentation to reflect the current browser API surface after pruning obsolete automation endpoints.

---

## 01784 — fix(mac): probe loopback bridge
**SHA:** 06806a1ea1 · **Date:** 2025-12-20 03:05
**Files changed:** bridge-prober.swift
**Tags:** `bugfix`, `networking`

Implements probing of the loopback bridge connection to detect and handle connectivity issues between the macOS app and gateway.

---

## 01785 — refactor(browser): simplify control API
**SHA:** 235f3ce0ba · **Date:** 2025-12-20 03:27
**Files changed:** browser/control-api.ts
**Tags:** `refactor`, `api`

Simplifies the browser control API by removing redundant methods and consolidating overlapping functionality for easier use and maintenance.

---

## 01786 — docs(browser): simplify control contract
**SHA:** 9b8a4d0c76 · **Date:** 2025-12-20 03:27
**Files changed:** docs/browser-control-api.md
**Tags:** `documentation`, `api`

Updates documentation to reflect the simplified browser control API contract after refactoring obsolete operations.

---

## 01787 — test(browser): cover agent contract
**SHA:** 429972b5c5 · **Date:** 2025-12-20 09:34
**Files changed:** browser/test/agent-contract.test.ts
**Tags:** `testing`, `core-feature`

Adds comprehensive tests verifying the contract between the browser and agent, ensuring proper communication and behavior across module boundaries.

---

## 01788 — fix(browser): extend hook arm timeouts
**SHA:** f54c801bd2 · **Date:** 2025-12-20 09:43
**Files changed:** browser/hook-manager.ts
**Tags:** `bugfix`, `performance`

Increases timeouts for browser hook initialization to accommodate slower systems and reduce flaky test failures on resource-constrained environments.

---

## 01789 — fix(browser): default hook timeout 2m
**SHA:** 94c495c8ed · **Date:** 2025-12-20 09:45
**Files changed:** browser/hook-manager.ts
**Tags:** `bugfix`

Sets default hook timeout to 2 minutes to allow long-running operations to complete without premature termination.

---

## 01790 — docs(browser): update hook timeouts
**SHA:** 3c551fd36f · **Date:** 2025-12-20 09:47
**Files changed:** docs/browser-hooks.md
**Tags:** `documentation`

Documents the new default hook timeout values and guidance for configuring timeouts for different operation types.

---

## 01791 — chore: update a2ui bundle
**SHA:** 28938ddb32 · **Date:** 2025-12-20 11:32
**Files changed:** a2ui bundle files
**Tags:** `devops`, `ui`

Updates the bundled a2ui user interface component to the latest version with bug fixes and performance improvements.

---

## 01792 — fix(a2ui): stabilize canvas host
**SHA:** cd5809d11f · **Date:** 2025-12-20 10:58
**Files changed:** a2ui/canvas-host.ts
**Tags:** `bugfix`, `ui`

Stabilizes the canvas hosting mechanism in a2ui to prevent rendering issues and ensure consistent display across different browsers and screen sizes.

---

## 01793 — fix(a2ui): improve modal styling
**SHA:** 13124542cf · **Date:** 2025-12-20 11:12
**Files changed:** a2ui/modal-styles.css
**Tags:** `bugfix`, `ui`

Improves CSS styling of modal dialogs in the a2ui component to enhance visual consistency and accessibility.

---

## 01794 — chore: remove dist from repo
**SHA:** cf21a15e06 · **Date:** 2025-12-20 12:06
**Files changed:** .gitignore, build configuration
**Tags:** `cleanup`, `build`

Removes build artifacts and compiled distribution files from version control, keeping the repository focused on source code only.

---

## 01795 — feat: add managed skills gating
**SHA:** d1850aaada · **Date:** 2025-12-20 12:22
**Files changed:** skills-manager.ts, gating-engine.ts
**Tags:** `core-feature`

Implements a gating mechanism for managed skills to control which skills are available based on user entitlements and system state.

---

## 01796 — docs: link docs section
**SHA:** a02adcc2ef · **Date:** 2025-12-20 12:27
**Files changed:** docs/index.md, docs/skills.md
**Tags:** `documentation`

Adds cross-references and links between documentation sections to improve navigability and help users discover related documentation.

---

## 01797 — fix: address skills lint
**SHA:** f0ebad3f21 · **Date:** 2025-12-20 12:29
**Files changed:** skills-linter.ts
**Tags:** `bugfix`, `cleanup`

Fixes linting issues in the skills module to ensure code quality standards are met across all managed skill implementations.

---

## 01798 — fix(skills): prevent skills loading crash
**SHA:** 0e2993a6c8 · **Date:** 2025-12-20 11:49
**Files changed:** skills-loader.ts
**Tags:** `bugfix`, `error-handling`

Adds defensive checks and error handling to prevent the application from crashing when skills fail to load, with graceful degradation.

---

## 01799 — docs: refine skills
**SHA:** 2d8e11b78b · **Date:** 2025-12-20 12:54
**Files changed:** docs/skills.md, docs/skills-architecture.md
**Tags:** `documentation`

Refines skills documentation with clearer examples, better organization, and updated architecture diagrams reflecting current implementation.

---

## 01800 — style: tidy macos swift formatting
**SHA:** 636e4d38d5 · **Date:** 2025-12-20 12:56
**Files changed:** apps/macos/Sources/Clawdis/*.swift
**Tags:** `cleanup`

Applies consistent code formatting to Swift source files across the macOS application to improve readability and maintainability.

---
