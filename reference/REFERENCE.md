# Reference Documents

This directory contains plain factual summaries of OpenClaw commits organized in two layers. These are **not** literary translations — they are the source of truth that translators (human or AI) use to ensure accuracy.

## Two-Layer Reference System

### Bronze Layer: Enriched per-commit summaries

One file per batch of commits (`commits-NNNNN-NNNNN.md`). Each commit entry includes:

- **Commit number and one-line subject** as the heading
- **SHA** (first 10 characters) and **time**
- **Files changed** — filenames modified in the commit
- **Tags** — semantic tags from the controlled vocabulary (see below)
- **2–3 sentence technical description** of what changed and why

### Silver Layer: Thematic chains

One file per theme in `themes/`. Each theme file aggregates every commit that participates in a theme, ordered chronologically, with:

- A **one-paragraph summary** of the theme's arc
- A **commit table** listing all participating commits
- A **narrative thread** — factual paragraphs describing how the theme develops
- **Cross-references** to related themes

Tags are the join key between bronze and silver: every tag in the bronze layer maps to a theme file in the silver layer (unless the tag has too few commits to warrant its own file).

## Tag Vocabulary

| Tag | Meaning |
|-----|---------|
| `genesis` | Project creation, licensing |
| `core-feature` | Primary relay functionality (send, receive, poll, webhook) |
| `type-safety` | TypeScript type improvements |
| `documentation` | README, comments, JSDoc |
| `verbosity` | Logging, output control, --verbose, --quiet |
| `ux` | User-facing prompts, error messages, defaults |
| `twilio-api` | Twilio SDK/API integration |
| `process-lifecycle` | Keeping alive, graceful shutdown, signals |
| `naming` | Renames, aliases, cosmetic identity |
| `auto-reply` | Config-driven and Claude auto-reply system |
| `provider` | Multi-provider architecture (Twilio vs Web) |
| `testing` | Vitest, unit tests, test infrastructure |
| `linting` | Biome, code quality tooling |
| `dependency` | Dependency updates, removals |
| `bugfix` | Fixing incorrect behavior |
| `refactor` | Restructuring without behavior change |

Commits can have multiple tags. Not every tag has its own theme file — tags with very few commits (e.g., `genesis`, `linting`) are tracked in the bronze layer but don't warrant a separate narrative.

## Building references

Reference documents are written by hand (or with AI assistance) from the commit diffs generated by the project's diff script.

### Step 1: Generate commit diffs

From the repository root:

```bash
./generate-commit-diffs.sh
```

This clones the OpenClaw repository into a temporary directory and writes one folder per commit into `commit-diffs/`. Each folder contains:

- `commit-info.txt` — author, date, SHA, subject, and body
- `diff.patch` — the full diff for that commit

To generate diffs into a custom directory:

```bash
./generate-commit-diffs.sh -C /path/to/output
```

### Step 2: Write the bronze layer

For each batch of commits, create a file named `commits-NNNNN-NNNNN.md`. Follow the format documented above.

### Step 3: Write the silver layer

For each tag that appears in enough commits to form a narrative, create a theme file in `themes/`. Gather all commits carrying that tag and write a factual narrative tracing how the theme develops.

### Step 4: Review for accuracy

Before committing, verify each entry against its `commit-info.txt` and `diff.patch`. Common things to check:

- Is the commit subject quoted accurately?
- Does the description match what the diff actually shows?
- Are file names and technical details correct?
- Is the author attribution correct?
- Do tags accurately reflect the commit's content?
- Are all tagged commits included in the corresponding theme file?

## Existing reference documents

### Bronze Layer

| File | Commits | Count |
|------|---------|-------|
| `commits-00001-00050.md` | Initial commit through generic README examples | 50 |
| `commits-00051-00100.md` | Lowercase branding through image support | 50 |
| `commits-00101-00150.md` | Image quickstart through source sync | 50 |
| `commits-00151-00200.md` | Test sync through media caps documentation | 50 |
| `commits-00201-00250.md` | Session prompt management through identity prefix gating | 50 |
| `commits-00251-00300.md` | CI type fixes through multi-agent changelog | 50 |
| `commits-00301-00350.md` | IPC hardening through verbose tool metadata | 50 |
| `commits-00351-00400.md` | Tool arg metadata through CLAWDIS rebrand | 50 |
| `commits-00401-00450.md` | Pi-only RPC through mac rebuild/relaunch | 50 |
| `commits-00451-00500.md` | Mac toggle label through session-memory test dedup | 50 |

### Silver Layer (Themes)

| File | Tag(s) | Commits (range) |
|------|--------|-----------------|
| `themes/auto-reply.md` | `auto-reply` | 00034–00422 (58 commits) |
| `themes/verbosity-and-ux.md` | `verbosity`, `ux` | 00004–00483 (~130 commits) |
| `themes/twilio-api.md` | `twilio-api` | 00002–00405 (19 commits) |
| `themes/process-lifecycle.md` | `process-lifecycle` | 00024–00444 (46 commits) |
| `themes/naming-and-identity.md` | `naming` | 00007–00417 (7 commits) |
| `themes/multi-provider.md` | `provider` | 00045–00453 (22 commits) |
| `themes/testing.md` | `testing` | 00046–00500 (~81 commits) |
| `themes/type-safety.md` | `type-safety` | 00005–00485 (14 commits) |

### Tags without dedicated theme files

| Tag | Reason |
|-----|--------|
| `genesis` | Single commit (00001) |
| `documentation` | Cross-cutting concern (~138 commits); commits are better understood through their primary themes |
| `linting` | Routine formatting (~18 commits); no narrative arc |
| `dependency` | Routine maintenance (~52 commits); no narrative arc |
| `bugfix` | Bugs are better understood in their primary theme context |
| `refactor` | Refactors serve their primary themes |
| `core-feature` | Too broad; commits belong to more specific themes |
| `optimization` | Single commit (00296) |

## Conventions

- One bronze file per batch (50–100 commits is a good size)
- Entries ordered by commit number
- Use `##` headings for each commit: `## NNNNN — Commit subject`
- Include SHA, timestamp, files changed, and tags on the lines below the heading
- No opinions, metaphors, or style-specific language in either layer
- Theme narratives are factual — literary interpretation belongs in the translations
