---
commit_number: 09138
commit_sha: "7176b114daa7f1bca61d4000dcca837ee6482059"
style: harry-potter
title: "The Ghost of Auth Past"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/03514-7176b114da-fix-auth- harden legacy auth-json cleanup-/ -->

## The Translation

At the castle, there are many old things — scrolls from the early days, configurations that have long since been superseded, and, of course, the dreaded legacy auth.json file.

You see, in the old days, authentication was stored in a simple file called auth.json. It was the way things were done then. But time passed, and a new system was created — one that uses auth profiles, more flexible, more secure. The old auth.json was meant to be migrated to this new system, and then... deleted.

But there was a problem. The old file wasn't being deleted after migration. It stayed, like a ghost in the castle walls. And sometimes — when the old credentials were refreshed or updated — the system would overwrite them with the old, migrated credentials, causing confusion and, occasionally, authentication failures.

The headmaster, upon hearing of this trouble from a contributor named reeltimeapps (who had submitted a pull request to fix this very issue), decided the ghost must be laid to rest.

Now, when the auth profile system migrates credentials from the old auth.json file, it ensures the old file is deleted afterward. No more ghost overwrites. No more stale OAuth tokens causing trouble.

The castle is a little cleaner now. And the ghosts have one less place to haunt.

## The Changes

This fix hardens legacy auth.json cleanup by ensuring the old auth.json file is deleted after its contents are migrated to the new auth profile system. This prevents stale OAuth tokens from overwriting fresh credentials during refresh operations. The fix was contributed by reeltimeapps via PR #368.
