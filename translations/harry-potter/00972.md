---
commit_number: 00972
commit_sha: "e84ed613392ae1c6c4bf281a7038b91530205099"
style: harry-potter
title: "The Organization Charm"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00972-e84ed61339-cli- gateway subcommands- drop ipc probes-/ -->

## The Translation

In the underwater castle of Clawgwarts, where the magical CLI enchantments are taught, there had long been a rather cluttered scroll known as program.ts. This scroll contained all the spells and incantations needed to command the various magical systems of the castle, but it had become quite unwieldy. It was like trying to find a specific potion ingredient in a storage room where everything had been mixed together.

The scroll contained spells for listing ports, forcing ports free, parsing magical outputs, and commanding various systems. It was as if the headmaster's office had been combined with the classroom for first-years, the potions laboratory, and the Great Reef Hall all in one room. Not very practical!

Professor Steinberger, who oversaw many of the castle's enchantments, had grown concerned about this state of affairs. "This scroll is becoming too crowded," he told Professor Flapperclaw one morning while examining the tangled magical script. "We must organize it better, or soon no one will be able to find the spell they need!"

And so, Professor Steinberger decided to cast the Organization Charm. He took all the spells related to ports — listPortListeners, forceFreePort, and parseLsofOutput — and moved them to their own scroll. He called this new scroll ports.ts, and it was dedicated solely to port-related enchantments.

"It is like separating the different classrooms in the castle," explained Professor Steinberger. "The first-years have their own classroom, the potion masters have their laboratory, and the port masters now have their own scroll. Much easier to navigate!"

But Professor Steinberger did not stop there. He also added new gateway subcommands to the CLI. These were powerful new spells that allowed the lobster wizards to command the gateway directly, without having to navigate through all the other enchantments. It was like adding a secret passage that leads directly from the common room to the headmaster's office, bypassing all the intermediate corridors.

However, there was one more problem to address. The IPC probe, a spell that checked whether the gateway was connected, was sometimes causing conflicts. It was like sending out a howler owl to check if another owl was delivering a message, only to have the owls bump into each other mid-flight.

"Mollywumps!" exclaimed Professor Steinberger. "We cannot have the probe spell causing such chaos! We must make it optional!"

And so, he modified the enchantment so that the probe would only be sent when specifically requested. By default, it would not be used, preventing any conflicts with the gateway. It was like only sending out a scout when you really need to know if a path is clear, rather than sending scouts all the time.

The young wizards cheered when they learned of these improvements. No longer would they have to search through a cluttered scroll to find the spell they needed. The CLI was now much more organized and easier to use.

"It is like having a well-organized library," said Professor Flapperclaw, "where each book has its own shelf and can be found easily."

And in the halls of Clawgwarts, the CLI enchantments worked better than ever before. The lobster wizards could now command their systems with ease, and the castle ran smoothly and efficiently.

## The Changes

The commit by Peter Steinberger on 2025-12-09 reorganized the CLI structure by extracting port-related functionality into a separate ports.ts module. The refactoring moved functions like listPortListeners, forceFreePort, and parseLsofOutput from program.ts to a dedicated ports.ts file, improving code organization. Additionally, gateway subcommands were added to the CLI, providing direct control over the gateway service. The IPC probe functionality was made optional to prevent conflicts when the gateway is already connected, with the probe now disabled by default.