---
commit_number: 09136
commit_sha: "cce65e19e1fb8aa80ec9008c5250c2b094f3b0a7"
style: harry-potter
title: "The Attach-Only Cloak"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/01056-cce65e19e1-mac- add attach-only gateway toggle-/ -->

## The Translation

There are, at the castle known as Clawgwarts, two ways for the mac application to connect to the gateway. One might simply start the gateway oneself — like a first-year lighting their own fire in the Common Room. The other is to find an already-running gateway and attach to it, like seeking out an owl that has already been sent.

(For the more magically inclined: the gateway is the castle's communication hub, and the mac application is the student wishing to use it.)

Now, sometimes a witch or wizard might wish to use only the second method. Perhaps they already have a gateway running elsewhere — perhaps they simply don't wish to have two gateways arguing over the same hearth. In such cases, what is one to do?

Enter the new debug toggle, added today by the headmaster: "Only attach to existing gateway (don't spawn locally)."

When enabled, this charm ensures that the mac application will never attempt to start a gateway itself. It will only look for one that is already running, and if none is found, it will simply sit and wait — like a perfectly behaved owl that has decided not to deliver a message until the recipient is home.

The toggle was added to the Debug Settings panel, where curious students may find it. It is stored in UserDefaults under a new key, and the GatewayProcessManager now checks this setting before attempting to spawn.

One imagines this will be particularly useful for those running the gateway on a different machine, or those who simply prefer to keep things tidy.

## The Changes

This commit added a new "attach-only" toggle to the mac app's Debug Settings. When enabled, the GatewayProcessManager will not spawn a local gateway and will instead only attempt to attach to an already-running gateway instance. This is useful for users who run the gateway separately or on a different machine. The setting is persisted via UserDefaults.
