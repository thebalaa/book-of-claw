---
commit_number: 03248
commit_sha: "fb2513e265e176a9caf803faaa8ae0de3b0f1ffb"
style: harry-potter
title: "The Message Unification Charm"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/03248-fb2513e265-fix-discord- Use channel ID for DMs instead of user ID -261-/ -->

## The Translation

In the magical underwater world of Clawgwarts, where lobster wizards communicate through enchanted Discord messages, there had always been two different ways of sending messages. It was like having two different types of owl post — one for private deliveries and one for public announcements.

For direct messages, when one wizard wanted to speak privately with another, the magical current would flow from discord:user to user:author. It was a private pathway, like sending a howler owl directly to another wizard's dormitory. The message would arrive with perfect secrecy, known only to the sender and the receiver.

For group messages, when multiple wizards wanted to converse in the same common room or classroom, the current would flow from group:channel to channel:channel. It was like posting a notice on the common room's enchanted blackboard for all to see.

The problem, as VACInc (a wizard from the mysterious VACInc school of magic) soon discovered, was that these two systems required different spells. A wizard had to remember which spell to use for private conversations and which for group ones. It was as if they needed one incantation to talk to a friend in private and another to address the entire Great Reef Hall.

"Mollywumps!" exclaimed Professor Steinberger when he learned of the confusion. "Young wizards are getting their spells mixed up! They're using the group spell for private messages and the private spell for group messages! The chaos is unbearable!"

VACInc, however, had a solution. He studied the magical pathways carefully and realized that both types of messages could follow the same current. "Instead of having two different pathways," he explained, "why don't we make them both use the channel pathway?"

And so, with a wave of his claw and a muttered incantation, VACInc cast the Message Unification Charm. He changed the direct messages so that they, too, would flow from discord:channel to channel:channel — just like group messages.

Now, whether a wizard wanted to send a private message to a friend or announce something to the entire school, the message would follow the same magical current. The difference between private and group messages was maintained in the ChatType — the magical label that indicated whether the message was meant for one wizard or many — but the pathway itself was now unified.

The young wizards cheered when they heard the news. No longer would they have to remember two different spells for sending messages. Now they could use the same enchantment for all their communications, whether private or public.

"It's like having one main tunnel from the Great Reef Hall that branches off to different classrooms," explained Professor Steinberger, "rather than having completely separate tunnels for each classroom. Much simpler to navigate!"

And in the halls of Clawgwarts, the message system was unified. The magical currents flowed smoothly, and the wizards could communicate freely, whether in private or in public.

## The Changes

The commit by VACInc on 2026-01-05 addressed Discord message routing inconsistencies. The fix changed the To field parameter for direct messages from "user:${message.author.id}" to "channel:${message.channelId}", making it consistent with group messages. Both direct and group messages now use channel-based addressing ("channel:${channelId}") while maintaining the ChatType distinction ("direct" vs "group"). This simplifies the message handling logic and removes the need for special cases when routing Discord messages.