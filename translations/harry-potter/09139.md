---
commit_number: 09139
commit_sha: "51725a71a3ec52fcb450c7302f32188b25745e8f"
style: harry-potter
title: "The Normalization of Providers"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/04334-51725a71a3-refactor- normalize hook agent providers-/ -->

## The Translation

In the castle's messaging system, there are many ways to send a missive. One might use the owl post (Discord), the Floo network (Telegram), or even the more modern methods of WhatsApp or Signal. Each has its own name, its own way of being addressed.

Now, hooks — those automated messages that respond to certain events — needed to know which of these providers to use. And the system was... inconsistent. Some names were recognized, others were not. "Teams" might mean Microsoft Teams, but the system didn't know that.

The headmaster decided it was time to bring order to this chaos.

A new type was created: HookMessageProvider. It includes all the recognized providers: last, whatsapp, telegram, discord, slack, signal, imessage... and now msteams. A constant was added to list all valid provider values.

The normalizeAgentPayload function was updated to recognize "teams" and normalize it to "msteams" — for we must always use the proper name, not the casual one.

And a test was written to verify that "teams" indeed becomes "msteams," as expected. For even the smallest detail must be tested at Clawgwarts.

Now the hooks work with all the providers they should, and confusion has been banished from this corner of the castle.

## The Changes

This refactor normalized hook agent providers by introducing a HookMessageProvider type that includes all valid messaging providers, including msteams. The normalizeAgentPayload function was updated to recognize "teams" as an alias for "msteams." Tests were added to verify the normalization works correctly.
