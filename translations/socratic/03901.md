---
commit_number: 03901
commit_sha: "1f7dbb6a480c2745c16c0be5d8d4e90cad5f21fa"
style: socratic
title: "On the Alignment of What Is Written with What Is Done"
author: claude-sonnet-4-6
date: 2026-02-17
---

<!-- Source: commit-diffs/03901-1f7dbb6a48-fix-daemon- align systemd unit with documentation-/ -->

## The Translation

STEINBERGER: Tell me, Bun, what do you suppose a service unit is for?

BUN: To start and stop a process in an orderly way, I would think.

STEINBERGER: And if such a unit exists, and documentation about such a unit also exists, what relationship ought there be between them?

BUN: Why — they should agree. The documentation should describe what the unit does.

STEINBERGER: Precisely. So you would say that a man who writes "the unit will wait for the network to be available" and then provides a unit that does *not* wait for the network — such a man has committed some small error?

BUN: A contradiction, yes.

STEINBERGER: And what of RestartSec? If a service crashes and restarts immediately and crashes again, immediately, many times — is that desirable?

BUN: It seems like it would cause trouble. A brief pause before restarting would be more civilized.

STEINBERGER: Five seconds, perhaps?

BUN: Five seconds seems entirely reasonable.

STEINBERGER: Good. And I notice that when this unit was first written, it was possible to run the daemon with Bun directly — a certain option was included for this purpose. Then this option was removed. And now I find it has been quietly restored.

BUN: Perhaps someone wanted it again.

STEINBERGER: Or perhaps it was removed prematurely. The documentation still mentioned it. The code still supported it. Only the unit file had forgotten.

BUN: So the fix is not complicated — merely a matter of bringing three things into alignment that had drifted apart.

STEINBERGER: That is often the nature of these corrections. The individual changes are small. Each line added or removed is defensible on its own. But taken together they say: *we said this, and we did not do this, and now we do*. And that, I think, is a virtue. Not a glamorous virtue, perhaps.

BUN: But a virtue nonetheless.

STEINBERGER: Indeed. A man who keeps his promises to his own configuration files — such a man may be trusted with larger matters.

## The Changes

The systemd service unit file was updated to match the documentation: `After=network-online.target` and `Wants=network-online.target` were added to ensure the daemon starts only after networking is available, `RestartSec=5` was added to prevent rapid crash-restart loops, and the optional `ExecStart` line for running via Bun (which had been documented but missing from the unit) was restored as a commented-out alternative.
