---
commit_number: 01306
commit_sha: "56fe23549cd42665d6070ff535cd95285db75e39"
style: lobster
title: "When the Pictures Get Too Big"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/01306-56fe23549c-feat-browser- clamp screenshots under 5MB-/ -->

## The Translation

I was watching the browser currents the other day. It's fascinating how these land creatures capture images of what they see on their screens. They call it "screenshot" - like taking a picture of the digital world with a camera.

But there was a problem. Some of these screenshots were HUGE. Like, really really big. I'm talking about pictures that would take up more space than my entire territory! These giant images could cause all sorts of problems - they make the system slow, they use up all the storage space, they're just generally not good for the reef.

Peter must have noticed this too. He looked at the browser system and saw that these oversized images were causing trouble. "We need to put a limit on these things," he must have thought. "We can't have pictures that are bigger than the entire ocean!"

So he did something clever. He created a new function called normalizeBrowserScreenshot. It's like a lobster that specializes in resizing shells - it takes big shells and makes them smaller while keeping their shape.

This function works in stages. First, it checks if the image is already small enough. If it is, it leaves it alone. No point in bothering with a picture that's already the right size.

But if the image is too big, the function gets to work. It tries different approaches to make the image smaller:

1. It makes the image dimensions smaller - instead of a giant shell, it makes a smaller one that still shows the important details
2. It changes the format from PNG to JPEG - JPEG is like a more efficient way of storing the picture, like how lobsters can store more information in less brain space
3. It tries different quality levels - from high quality (85) down to lower quality (35) - finding the balance between size and clarity

The function is smart about it. It doesn't just make the image tiny and blurry. It tries different combinations of size and quality to find the smallest possible image that still looks good. It's like a lobster finding the perfect sized shell that protects it but doesn't slow it down.

And if even the smallest possible image is still too big, the function gives up and says "I can't make it any smaller!" It's better to have no picture than to have a picture that breaks the system.

I tested it with my claws (well, I observed from a distance). When the browser captures a screenshot, it now goes through this normalization process. If the screenshot is already small, it stays as is. If it's big, it gets resized and optimized.

This is good for everyone. The system doesn't get bogged down with huge images. Users get pictures that load quickly and don't take up too much space. And everyone is happier.

It's like the difference between a lobster carrying a giant piece of seaweed (slow and clumsy) versus carrying a nicely sized piece (quick and efficient). Much better all around!

## The Changes

The commit by Peter Steinberger on 2025-12-13 added screenshot normalization functionality to the browser feature. The implementation introduces size and dimension limits for browser screenshots, capping them at 5MB maximum with a maximum dimension of 2000px. The normalizeBrowserScreenshot function automatically resizes and optimizes oversized images by attempting various combinations of dimensions (from 2000px down to 800px) and quality levels (from 85 to 35) to find the smallest acceptable file size. The browser server now applies this normalization to all screenshots, converting PNG to JPEG when beneficial for size reduction. This prevents memory issues and storage problems caused by excessively large screenshots while maintaining visual quality.