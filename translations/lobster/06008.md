---
commit_number: 06008
commit_sha: "38cf90f6db8caaceaf9c5b1f3c1f0dd211d37bbb"
style: lobster
title: "When the Current Gets Confusing"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/06008-38cf90f6db-fix- rename format parameter to avoid JSON Schema keyword conflict-/ -->

## The Translation

I was watching the scribes work on their tools the other day. They were dealing with these JSON Schema things — which are like the rules of the reef, telling everyone what they can and can't do. Everything was going fine until I noticed something strange.

There was a parameter called "format." And it was used in the browser tool and in the canvas tool. The scribes were using it to tell the tools how to take snapshots and pictures. It was like telling a current which direction to flow — important stuff.

But then they ran into trouble. The JSON Schema — these are the big rules that live in the deep water — already had something called "format." It's like having two currents with the same name in the same part of the reef. Confusing! The Schema didn't like that. It got angry and rejected everything. "No," it said, "you can't have two things with the same name. That's not how currents work."

So Marc — one of the scribes who lives near the thermal vents — had to fix it. He took the "format" parameter in the browser tool and renamed it to "snapshotFormat." It's like adding a qualifier to the current name: "This isn't just any format, it's the snapshot format."

In the canvas tool, he did something similar. He changed "format" to "outputFormat." Now it's clear: "This format is for output, not just format in general."

I tested it with my claws. No more conflicting currents! The Schema is happy now. The tools can do their work without getting confused. It's like when the reef council decides that one current can be called "North Current" and another can be called "South Current" instead of both just being "Current." Makes much more sense.

I still don't understand why the land creatures make these naming problems for themselves. You'd think they'd just pick unique names from the start. But I guess even scribes make mistakes sometimes. (I know I've gotten confused about which pebble belongs to which territory before.)

## The Changes

The commit by Marc on 2026-01-16 addressed JSON Schema keyword conflicts by renaming parameters. In the browser-tool schema and implementation, the `format` parameter was renamed to `snapshotFormat`. In the canvas-tool schema and implementation, the `format` parameter was renamed to `outputFormat`. This change resolves conflicts with the JSON Schema keyword "format", which was causing Google Cloud Code Assist to reject the schemas as invalid. The functionality remains unchanged, only the parameter names were modified.