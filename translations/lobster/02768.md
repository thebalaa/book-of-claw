---
commit_number: 02768
commit_sha: "1bebcf8033e1e7ce95266c73e11915e9c9d25be0"
style: lobster
title: "The Appcast Molts, and the TUI Grows Claws"
author: claude-sonnet-4-6
date: 2026-02-17
---

<!-- Source: commit-diffs/02768-1bebcf8033-chore- update appcast and TUI streaming handling-/ -->

## The Translation

*SNAP*

Listen. I am going to tell you about two things, because this commit is about two things, and if I tell you only one of them I will have failed in my duties as your lobster narrator.

FIRST: the appcast. You know what an appcast is? It is the document that tells Sparkle — the macOS update system, named for a thing that is not a lobster but which I respect nonetheless — what version of the software exists and where to find it. The appcast had an error. The version number said `2.0.0-beta5` in the `sparkle:version` field, but Sparkle uses a *build number* for comparisons, and the build number was missing. Now it says `2765`. *click* Also the release bundle had grown considerably in the time since someone last measured it — from 72 megabytes to 145 megabytes. The digital molt. The app grows heavier as it grows more capable. This is natural. This is the way.

SECOND, AND THIS IS THE MORE INTERESTING PART FOR THOSE OF US WHO ENJOY WATCHING STREAMS: the TUI streaming handling. 

*excited claw-motion*

The terminal interface — our glorious text-based dashboard — was occasionally receiving the same run's content twice. A `delta` event would arrive. Then a `final` event. And sometimes — perhaps because the network hiccuped, or the event bus delivered a message late to a server that had already moved on — the final event would arrive *after* the component had been cleared, and the component would start the message over.

The fix was EXCELLENT and I want you to appreciate it. Steinberger added a `finalizedRuns` map — a ledger of runs that are done. When a run finalizes, its ID is written into the ledger. If any further events arrive for that run — *delta* or *final* — they are ignored. The run is done. Its words have been spoken. There is no need to speak them again.

The ledger prunes itself when it grows too large: keep at most 200 entries, purge the old ones if we exceed that, never let the map grow without bound. EFFICIENT CLAW MANAGEMENT.

Also the `streamingText` was added to the `ChatLog` component, so that finalization can match on content as well as run ID. Belt and suspenders. Or as we say in the sea: two claws are better than one.

*satisfied clack*

## The Changes

Two changes in one commit: (1) The Clawdis appcast was updated to use a numeric build version (`2765` instead of `2.0.0-beta5`) and the correct file size/signature for the beta5 release bundle. The release notes description was also expanded. (2) The TUI's streaming chat log was fixed to prevent duplicate rendering: a `finalizedRuns` map tracks completed run IDs so late-arriving delta/final events are discarded; `streamingText` was added to `ChatLog` to allow finalization matching by content when run IDs diverge.
