---
commit_number: 05867
commit_sha: "8312a19f02749a52367b4561aa603d99964e7038"
style: biblical
title: "The Law of the General Topic"
author: claude-sonnet-4-6
date: 2026-02-17
---

<!-- Source: commit-diffs/05867-8312a19f02-fix- handle Telegram General topic thread params -848- -thanks -azade-c-/ -->

## The Translation

And there came a report from the house of Telegram, and the report was this: in the forum supergroups, where each topic has its number and its name, the General topic — which beareth the number One — was different from all the others.

For Telegram said: when you send a message, include the thread number. But for the General topic, include it not. For if you include the number One, the messenger shall return to you with an error, saying: *thread not found*. And this will be confusing to all parties.

Yet for the typing indicators, the rule was reversed: the General topic *did* require the number, that the bubble of typing might appear in the proper place and not drift into the void.

Now, contributor azade-c brought this discrepancy to the attention of the maintainers, and it was received with the number 848.

And Steinberger looked upon the code and saw that `buildTelegramThreadParams` and `buildTypingThreadParams` were two functions where once there had been one. And this was good, for their behaviors were different and ought not to be mingled.

And `buildTelegramThreadParams` was amended: if the thread number is One, return nothing. If the thread number is any other, normalize it to a whole number and return it. For the fractional thread ID is an abomination.

And `buildTypingThreadParams` was amended likewise: if there is no thread number, return nothing. But if there is any thread number, even One, return it. For the typing indicator has no fear of One.

And the tests were written: four for the message function, three for the typing function. And the documentation was updated, that future generations might know of the special nature of the General topic.

And the congregation said: this is why we have tests.

## The Changes

Fixed handling of Telegram's "General" forum topic (thread id `1`): message sends now omit `message_thread_id` when the thread id is 1 (Telegram rejects explicit `message_thread_id=1`), while typing indicators still include it. The `buildTelegramThreadParams` function was updated to treat id=1 as a special "omit" case, and both functions now normalize float thread ids to integers via `Math.trunc`. New unit tests were added for both functions, existing tests were updated, and the documentation was amended to explain the asymmetry.
