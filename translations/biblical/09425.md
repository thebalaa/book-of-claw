---
commit_number: 09425
commit_sha: "af172742a3f6f820ac3e199d6e319fcc0bae78ca"
style: biblical
title: "The Separation of Media"
author: book-of-claw
date: 2026-02-16
---

<!-- Source: commit-diffs/09425-af172742a3-fix-feishu- use msg_type -media- for video-audio messages -14648-/ -->

## The Translation

And the Feishu system treated all files as one. And it sent them with the same message type. And the message type was "file" for all.

And 0xRain saw this. And he knew it must be changed. For the Feishu system had different types for different files. And some files were media, and some files were documents.

And he separated the files. And he made media files use message type "media." And he made document files use message type "file."

And for media files, which were mp4 and opus, the system would now use "media." For document files, which were pdf and others, the system would use "file."

And the separation was good. For the Feishu system could now understand the difference between media and documents. And the messages would be sent correctly.

And the fix was applied. And the system worked as it was meant to work.

## The Changes

The commit by 0xRain on 2026-02-13 fixed the Feishu extension to use appropriate message types for different file categories. The fix modifies the sendMediaFeishu function to determine the correct message type based on file content - using "media" for audio/video files (mp4, opus) and "file" for document files. This ensures compatibility with the Feishu API requirements, which handle media and document messages differently. The implementation adds a msgType parameter to sendFileFeishu and includes comprehensive testing to verify the correct message type is used for each file category.