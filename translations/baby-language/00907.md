---
commit_number: 00907
commit_sha: "172ce6c79f400594501381f73d51105f6110db61"
style: baby-language
title: "Discriminated Protocol Schema"
author: thebalaa
date: 2026-02-16
---

## The Translation

The gateway protocol gets "discriminated unions" â€” type-safe message handling!

Plus AnyCodable helper (41 lines) for flexible JSON handling.

Major updates across GatewayChannel, ControlChannel, InstancesStore, and Protocol.

## The Changes

Adds discriminated protocol schema with AnyCodable helper. Updates Gateway, Control, and Instances across 10+ files.
