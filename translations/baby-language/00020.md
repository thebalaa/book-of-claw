---
commit_number: 00020
commit_sha: "3775caa72d44e86719ceae47babf1221301671e9"
style: baby-language
title: "Making the Code Safer with Better Labels"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00020-3775caa72d-Tighten types for Twilio requests and sender lookup-/ -->

## The Translation

Peter added more specific labels to the code to make it safer and clearer. In TypeScript (the language the program is written in), you can tell the computer exactly what shape your data should be - like saying "this box should only contain red blocks, not blue ones."

Before, the code was using vague labels like `Record<string, unknown>` (which means "a box that could contain anything"). Now it has specific types like `TwilioSender` and `TwilioRequestOptions` - these are like labeled boxes that say exactly what should be inside.

For example, a `TwilioSender` is now defined as having exactly two pieces: a `sid` (an ID number) and a `sender_id` (a phone number). The computer can now check: "Hey, does this box actually have those two pieces?" and complain if it doesn't.

This makes the code harder to break accidentally. If someone tries to use the wrong kind of data, TypeScript will say "Nope, that doesn't match!" before the program even runs.

It's like organizing a toolbox - instead of one big drawer of "stuff," you now have labeled compartments for screws, nails, and bolts.

## The Changes

This commit tightened TypeScript types for Twilio API interactions:

- Created `TwilioRequestOptions` type defining the shape of request options (method, uri, params, form)
- Created `TwilioSender` type defining sender objects (sid and sender_id properties)
- Created `TwilioRequestResponse` type for API responses with optional senders array
- Created `TwilioRequester` type for the request function signature
- Simplified `findWhatsappSenderSid()` by using proper types instead of type assertions and checks
- Changed sender matching logic to be cleaner: `s?.sender_id === withWhatsAppPrefix(from)`
- Used `TwilioRequester` type in both `findWhatsappSenderSid()` and `updateWebhook()`

These changes make the code more type-safe with better autocomplete and compile-time checking, while also making it more readable.
