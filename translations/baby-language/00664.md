---
commit_number: 00664
commit_sha: "1f0ee9837b2e8d9f36d414ae116098a651bbc83f"
style: baby-language
title: "Fixing a Race with Timeouts"
author: thebalaa
date: 2026-02-16
---

## The Translation

A "race condition" is when two things happen at the same time and cause problems. The health check had a race between finishing and timing out!

This fix makes the timeout handling more robust:
- Properly cancels the timeout when done
- Handles the race safely
- No more hanging or double-calls

17 lines added, 9 removed â€” more correct behavior.

## The Changes

Fixes shell timeout race in `ShellRunner.swift` (26 lines changed) with proper cancellation and race handling.
