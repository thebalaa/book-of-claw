---
commit_number: 00240
commit_sha: "c20a266a11ed85b6ddea98926c3035f5c47d03d2"
style: baby-language
title: "Smarter Heartbeat Targeting"
author: thebalaa
date: 2026-02-16
---

## The Translation

When a heartbeat wants to send a message, it needs to know who to send it to. This change makes the targeting system much smarter!

Now heartbeats can use that @lid mapping we just added. They can also handle edge cases better—like when there are multiple possible recipients, or when the usual recipient isn't available.

It's like teaching a messenger to find the right person even if they're not in their usual spot. "John's not at his desk? Check the break room. Still not there? Try his phone."

The system got hardened—made tougher and more reliable—so it won't get confused in tricky situations.

## The Changes

Hardens heartbeat message targeting with better error handling and adds lid (label ID) mapping support. The heartbeat system can now resolve various contact identifier formats and handle edge cases when determining message recipients. Includes extensive tests covering the new targeting logic.
