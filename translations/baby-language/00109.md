---
commit_number: 00109
commit_sha: "5ce869f86c6a1a63ae031aa7e4528ecbe1de6958"
style: baby-language
title: "Understanding Different Picture Paths"
author: impozzible
date: 2026-02-16
---

<!-- Source: commit-diffs/00109-5ce869f8-fix: accept file/media tokens safely and improve web media send-/ -->

## The Translation

Peter taught the program to understand more ways of pointing to a picture.

Before, it only understood web addresses like "https://example.com/pic.jpg". But sometimes a helper might say "the picture is at /tmp/pic.png" (a file on the computer) or even "file:///tmp/pic.png" (another way to write the same thing).

Now the program understands:
- Web addresses: https://example.com/pic.jpg ✓
- File paths: /tmp/pic.jpg ✓
- Relative paths: ./images/pic.jpg ✓
- File URLs: file:///tmp/pic.jpg (it strips the "file://" part) ✓

But wait — you can't send a file path to someone else's phone! So the program also learned a new trick: if the picture is on the local computer (not a web address), it automatically uploads it to a temporary hosting service first. Then it sends the web link instead.

It's like: "I have a photo on my computer. Let me upload it to a sharing site, then send you the link."

The Web provider (for WhatsApp Web) also got improvements to handle pictures better.

## The Changes

Peter Steinberger updated `src/auto-reply/reply.ts` and `src/provider-web.ts` on November 25, 2025. A `normalizeMediaSource()` function strips "file://" prefixes. The MEDIA parsing now accepts local paths (starting with "/" or "./") in addition to URLs. For Twilio auto-replies, local media is passed through `ensureMediaHosted()` to upload and get a public URL. The web provider's media sending was also improved. Tests were added for the "trailing text after MEDIA token" case.
