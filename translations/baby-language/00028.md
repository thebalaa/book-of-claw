---
commit_number: 00028
commit_sha: "a6e6a260974e8944b3a53067d8fe11374bf5e858"
style: baby-language
title: "Adding a Backup Plan for Setting the Webhook"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00028-a6e6a26097-Fallback webhook update to incoming phone number when channels sender update fai/ -->

## The Translation

Peter added a backup plan for when setting the Twilio webhook doesn't work the normal way.

Normally, the program updates the webhook URL through the Channels Senders API (that's the modern WhatsApp way). But sometimes that fails - maybe your account doesn't have the right permissions, or the sender isn't configured properly.

Now if the Channels Senders update fails, the program tries a fallback: it looks for your phone number in the Incoming Phone Numbers list and sets the SMS webhook URL there instead. It's like having a spare key - if the front door lock doesn't work, try the back door.

The program first tries the modern way. If that fails (and you have verbose mode on, it tells you it's trying the fallback). Then it searches for your phone number, and if it finds it, updates the SmsUrl field instead.

Only if both methods fail does the program give up and exit with an error message.

## The Changes

This commit added fallback webhook configuration:

- Created `IncomingNumber` type for the phone numbers API
- Extended `TwilioSenderListClient` type to include `channelsSenders().update()` and `incomingPhoneNumbers` methods
- Created `findIncomingNumberSid()` helper to locate the phone number SID
- Rewrote `updateWebhook()` to try Channels Senders first, then fall back to incoming phone number
- If channels sender update works, logs "Twilio sender webhook set"
- If fallback to phone number works, logs "Twilio phone webhook set"
- Only exits with error if both approaches fail

This makes setup more robust for accounts where WhatsApp senders aren't fully configured or accessible via the Channels API.
