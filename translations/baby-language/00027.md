---
commit_number: 00027
commit_sha: "d8bfd6ba5e7d0fe13a0c689f63c48b5ba345c47d"
style: baby-language
title: "Adding a Code Formatter and Port-Checking"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00027-d8bfd6ba5e-Add Biome linting and improve webhook error handling-/ -->

## The Translation

Peter made two big improvements in this commit.

First, he added Biome - a tool that checks code style and finds mistakes automatically. It's like a spell-checker and grammar-checker for code. Biome makes sure all the code follows the same rules: tabs instead of spaces, double quotes instead of single quotes, and so on. He set up a GitHub Actions workflow so Biome runs automatically whenever code is pushed.

Second, he added smart port-checking. Before starting the webhook server, the program now tests if the port is available. If another program is already using that port (like if you accidentally started two webhooks), it gives you a helpful error message instead of just crashing.

The best part: if it detects another warelay instance is using the port, it tells you "It looks like another warelay instance is already running. Stop it or pick a different port." It can even show you which process is using the port (using `lsof` on macOS/Linux).

The whole codebase was reformatted to match Biome's style, so there are lots of changes to spacing and quotes, but the program works exactly the same way.

## The Changes

This commit added Biome linting and improved port conflict handling:

- Added `@biomejs/biome` dev dependency and `biome.json` configuration file
- Created `.github/workflows/ci.yml` for automated linting on push/PR
- Updated npm scripts: `lint`, `lint:fix`, `format`, `format:fix`
- Reformatted entire codebase to match Biome style (tabs, double quotes, etc.)
- Created `PortInUseError` custom error class for port conflicts
- Added `isErrno()` type guard for Node.js errors
- Added `describePortOwner()` function using `lsof` to identify what's using a port
- Added `ensurePortAvailable()` to check port before starting server
- Added `handlePortError()` with friendly error messages and remediation steps
- Updated `startWebhook()` to properly handle listen errors via promise rejection
- Both `webhook` and `setup` commands now check port availability before starting

Now port conflicts are caught early with helpful messages instead of cryptic EADDRINUSE errors.
