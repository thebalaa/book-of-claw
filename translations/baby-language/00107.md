---
commit_number: 00107
commit_sha: "f4c5f2c193a1d7d6b358b1b7f543594330563eb6"
style: baby-language
title: "Testing the Picture Extraction"
author: impozzible
date: 2026-02-16
---

<!-- Source: commit-diffs/00107-f4c5f2c1-test: cover media url extraction from command stdout-/ -->

## The Translation

Peter added a test (a way to check if something works correctly) for the new picture-sending feature.

The test pretends to be a helper that responds with:
```
hello
MEDIA: https://example.com/img.jpg
```

Then it checks: Did the program understand that "hello" is the text reply, and "https://example.com/img.jpg" is a picture to send?

If both parts are correct, the test passes ✓. If something breaks later, this test will catch it.

Think of it like a fire drill — you practice to make sure everyone knows what to do, so when it matters, everything works smoothly.

Just one file changed, 30 new lines. Small addition, but important for making sure the feature keeps working.

## The Changes

Peter Steinberger added a test case to `src/index.core.test.ts` on November 25, 2025. The test mocks `runCommandWithTimeout` to return stdout containing "hello\nMEDIA: https://example.com/img.jpg\n". It then verifies that `getReplyFromConfig` correctly extracts the text ("hello") and mediaUrl ("https://example.com/img.jpg") as separate fields. This ensures the MEDIA: parsing logic works as expected.
