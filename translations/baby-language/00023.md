---
commit_number: 00023
commit_sha: "f7a7b1b29ebee3436a6bd52f4a903358c399ae6c"
style: baby-language
title: "Adding Request Logging and a 404 Page"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00023-f7a7b1b29e-Log incoming requests and add 404 handler for webhook server-/ -->

## The Translation

Peter added two improvements to the webhook server (the little web server that listens for incoming WhatsApp messages):

First, he added request logging. In verbose mode, every time someone knocks on the door (sends an HTTP request), the server now logs it in gray text: "REQ POST /webhook/whatsapp" or whatever the request was. It's like having a doorbell camera that records who came by and when.

This happens before any other processing through a middleware function - think of it as a greeter at the door who writes down everyone's name before they come in.

Second, he added a 404 handler (a "page not found" response). Before, if someone went to the wrong URL on the webhook server (like going to /random instead of /webhook/whatsapp), the server would give a generic error. Now it sends back a friendly message: "warelay webhook: not found."

This 404 handler goes at the very end, like a catch-all safety net. If the request doesn't match any of the real paths, it falls through to this final handler.

## The Changes

This commit improved webhook server logging and error handling:

- Added middleware that logs all incoming requests in verbose mode: `REQ {METHOD} {URL}` in gray
- The middleware runs before the webhook route handler, logging all traffic to the server
- Added a 404 catch-all route handler after the webhook routes
- The 404 handler returns status 404 with text "warelay webhook: not found"

These changes make debugging easier (you can see what requests are coming in) and provide clearer responses for invalid paths.
