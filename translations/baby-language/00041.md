---
commit_number: 00041
commit_sha: "2f5a0d9402b69f662dde6fa36df8ab4f5d22e0e2"
style: baby-language
title: "Fixing Hanging Commands with Better Process Spawning"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00041-2f5a0d9402-Run auto-reply commands via spawn with TTY to avoid hangs-/ -->

## The Translation

Peter fixed a tricky bug where auto-reply commands would sometimes hang (freeze forever). The problem was how Node.js runs external programs.

He switched from `execFile` (which buffers all output) to `spawn` (which streams output). He also added TTY support so the command thinks it's running in a real terminal, not being piped through a program.

Think of it like the difference between recording a whole concert and then listening to it versus hearing it live as it happens. The spawn approach is more direct and prevents certain types of freezing.

## The Changes

This commit switched command execution from execFile to spawn:

- Replaced `execFileAsync` with `spawn` for auto-reply commands
- Added TTY configuration to prevent hangs on commands expecting terminal input
- Improved process cleanup and error handling
- Maintained timeout enforcement via spawn kill signal

Commands that previously hung (like interactive AI tools) now work reliably.
