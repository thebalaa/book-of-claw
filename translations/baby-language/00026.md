---
commit_number: 00026
commit_sha: "9bdeb723b4ae8453239facac90f1388cb6dd6c71"
style: baby-language
title: "Making the Wait-Forever Loop More Reliable"
author: thebalaa
date: 2026-02-16
---

<!-- Source: commit-diffs/00026-9bdeb723b4-Keep process alive reliably with unref interval in waitForever-/ -->

## The Translation

Peter improved the `waitForever()` function to be more reliable. The old version just had a promise that never resolved - like sitting in a waiting room forever. But sometimes that wasn't enough to keep the program alive.

Now it also creates a timer (interval) that wakes up every million milliseconds (about 16 minutes), but then immediately calls `.unref()` on it. The unref means "don't keep the program alive JUST for this timer" - so it's like a gentle heartbeat that helps the event loop stay active, but won't prevent the program from exiting when you want to stop it.

It's like having a quiet clock ticking in the background - it keeps the room alive without being the only reason the room exists.

## The Changes

This commit improved the `waitForever()` function:

- Added `setInterval(() => {}, 1_000_000)` to create a long-running interval
- Called `.unref()` on the interval so it doesn't prevent the process from exiting
- Kept the never-resolving promise as before

This combination keeps the Node.js event loop active more reliably while still allowing clean shutdown via SIGINT.
