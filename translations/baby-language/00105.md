---
commit_number: 00105
commit_sha: "6d41df29419690b209037574284693f6dca799b8"
style: baby-language
title: "Learning to Receive Pictures"
author: impozzible
date: 2026-02-16
---

<!-- Source: commit-diffs/00105-6d41df29-feat: download inbound media and expose to templating-/ -->

## The Translation

This is a big one! Peter taught the program how to handle pictures that people send TO it.

Before, the program could send pictures out, but when someone sent a picture back, it didn't know what to do with it. Like a friend who can mail you photos but can't open the ones you send.

Now when a picture arrives:
1. The program downloads it and saves it to a folder (like putting a received photo in an album)
2. It remembers three things about the picture: where it's saved (MediaPath), what type it is (MediaType, like "image/jpeg"), and the original web address (MediaUrl)
3. These details can be passed along to other parts of the program using templates (like filling in blanks on a form)

This works for both ways of receiving messages â€” the Twilio way and the Web way.

A lot of files changed (7 files, over 200 new lines) because Peter had to teach several different parts of the program this new trick.

## The Changes

Peter Steinberger added inbound media handling on November 25, 2025. Changes span 7 files: `templating.ts` now includes MediaPath/MediaUrl/MediaType fields; `media/store.ts` supports authenticated downloads with headers; `provider-web.ts` downloads and stores media from WhatsApp Web messages; `twilio/webhook.ts` does the same for Twilio webhooks. Tests were added to verify media fields are available in templates. This enables auto-reply commands to "see" incoming images.
